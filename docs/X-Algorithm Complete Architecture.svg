<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="3038px" preserveAspectRatio="none" style="width:6186px;height:3038px;background:#FEFEFE;" version="1.1" viewBox="0 0 6186 3038" width="6186px" zoomAndPan="magnify"><title>X For You Feed Algorithm - Complete Architecture</title><defs/><g><rect fill="#FEFEFE" height="3038" style="stroke:none;stroke-width:1;" width="6186" x="0" y="0"/><g class="title" data-source-line="5"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="618.1699" x="2779.7376" y="37.1182">X For You Feed Algorithm - Complete Architecture</text></g><!--cluster External Systems--><g class="cluster" data-entity="External Systems" data-source-line="10" data-uid="ent0002" id="cluster_External Systems"><path d="M3771.34,899.2873 L3908.9562,899.2873 A3.75,3.75 0 0 1 3911.4562,901.7873 L3918.4562,922.302 L4570.34,922.302 A2.5,2.5 0 0 1 4572.84,924.802 L4572.84,1137.8273 A2.5,2.5 0 0 1 4570.34,1140.3273 L3771.34,1140.3273 A2.5,2.5 0 0 1 3768.84,1137.8273 L3768.84,901.7873 A2.5,2.5 0 0 1 3771.34,899.2873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="3768.84" x2="3918.4562" y1="922.302" y2="922.302"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="136.6162" x="3772.84" y="915.3625">External Systems</text></g><!--cluster Kafka--><g class="cluster" data-entity="Kafka" data-source-line="11" data-uid="ent0003" id="cluster_Kafka"><path d="M3792.84,961.7873 C3792.84,951.7873 3891.84,951.7873 3891.84,951.7873 C3891.84,951.7873 3990.84,951.7873 3990.84,961.7873 L3990.84,1097.8173 C3990.84,1107.8173 3891.84,1107.8173 3891.84,1107.8173 C3891.84,1107.8173 3792.84,1107.8173 3792.84,1097.8173 L3792.84,961.7873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M3792.84,961.7873 C3792.84,971.7873 3891.84,971.7873 3891.84,971.7873 C3891.84,971.7873 3990.84,971.7873 3990.84,961.7873" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44.8027" x="3869.4386" y="987.8625">Kafka</text></g><!--cluster User Social Graph--><g class="cluster" data-entity="User Social Graph" data-source-line="14" data-uid="ent0005" id="cluster_User Social Graph"><path d="M4014.84,961.7873 C4014.84,951.7873 4092.84,951.7873 4092.84,951.7873 C4092.84,951.7873 4170.84,951.7873 4170.84,961.7873 L4170.84,1097.8173 C4170.84,1107.8173 4092.84,1107.8173 4092.84,1107.8173 C4092.84,1107.8173 4014.84,1107.8173 4014.84,1097.8173 L4014.84,961.7873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M4014.84,961.7873 C4014.84,971.7873 4092.84,971.7873 4092.84,971.7873 C4092.84,971.7873 4170.84,971.7873 4170.84,961.7873" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="139.6445" x="4023.0177" y="987.8625">User Social Graph</text></g><!--cluster Content Store--><g class="cluster" data-entity="Content Store" data-source-line="17" data-uid="ent0007" id="cluster_Content Store"><path d="M4234.84,953.2873 C4234.84,943.2873 4310.84,943.2873 4310.84,943.2873 C4310.84,943.2873 4386.84,943.2873 4386.84,953.2873 L4386.84,1106.3273 C4386.84,1116.3273 4310.84,1116.3273 4310.84,1116.3273 C4310.84,1116.3273 4234.84,1116.3273 4234.84,1106.3273 L4234.84,953.2873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M4234.84,953.2873 C4234.84,963.2873 4310.84,963.2873 4310.84,963.2873 C4310.84,963.2873 4386.84,963.2873 4386.84,953.2873" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="108.7188" x="4256.4806" y="979.3625">Content Store</text></g><!--cluster Home Mixer (Rust)--><g class="cluster" data-entity="Home Mixer .Rust." data-source-line="27" data-uid="ent0011" id="cluster_Home Mixer .Rust."><path d="M1292.34,557.7573 L1442.8556,557.7573 A3.75,3.75 0 0 1 1445.3556,560.2573 L1452.3556,580.772 L3742.34,580.772 A2.5,2.5 0 0 1 3744.84,583.272 L3744.84,2797.5473 A2.5,2.5 0 0 1 3742.34,2800.0473 L1292.34,2800.0473 A2.5,2.5 0 0 1 1289.84,2797.5473 L1289.84,560.2573 A2.5,2.5 0 0 1 1292.34,557.7573" fill="#E3F2FD" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1289.84" x2="1452.3556" y1="580.772" y2="580.772"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="149.5156" x="1293.84" y="573.8325">Home Mixer (Rust)</text></g><!--cluster mixer_server--><g class="cluster" data-entity="mixer_server" data-source-line="28" data-uid="ent0012" id="cluster_mixer_server"><rect fill="#FFFFFF" height="637.16" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="231" x="2981.76" y="639.7573"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="140.6768" x="3026.9216" y="655.8325">HomeMixerServer</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="221.0879" x="2986.7161" y="672.8471">(gRPC: ScoredPostsService)</text></g><!--cluster query_hydrators--><g class="cluster" data-entity="query_hydrators" data-source-line="34" data-uid="ent0015" id="cluster_query_hydrators"><rect fill="#FFFFFF" height="142.03" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="505" x="3207.84" y="973.7873"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130.2178" x="3395.2311" y="989.8625">Query Hydrators</text></g><!--cluster sources--><g class="cluster" data-entity="sources" data-source-line="40" data-uid="ent0018" id="cluster_sources"><rect fill="#FFFFFF" height="142.03" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="400" x="2788.84" y="1505.4173"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="145.9609" x="2915.8595" y="1521.4925">Candidate Sources</text></g><!--cluster hydrators--><g class="cluster" data-entity="hydrators" data-source-line="46" data-uid="ent0021" id="cluster_hydrators"><rect fill="#FFFFFF" height="348.04" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="829" x="1321.84" y="1785.9473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="161.8203" x="1655.4298" y="1802.0225">Candidate Hydrators</text></g><!--cluster pre_filters--><g class="cluster" data-entity="pre_filters" data-source-line="55" data-uid="ent0027" id="cluster_pre_filters"><rect fill="#FFFFFF" height="552.05" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="740" x="2190.84" y="2000.4573"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="146.9385" x="2487.3708" y="2016.5325">Pre-Scoring Filters</text></g><!--cluster scorers--><g class="cluster" data-entity="scorers" data-source-line="68" data-uid="ent0037" id="cluster_scorers"><rect fill="#FFFFFF" height="290.54" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="554" x="3148.84" y="2270.4773"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.3154" x="3396.1823" y="2286.5525">Scorers</text></g><!--cluster post_filters--><g class="cluster" data-entity="post_filters" data-source-line="79" data-uid="ent0043" id="cluster_post_filters"><rect fill="#FFFFFF" height="142.03" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="453" x="3259.84" y="2626.0173"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="167.9863" x="3402.3468" y="2642.0925">Post-Selection Filters</text></g><!--cluster side_effects--><g class="cluster" data-entity="side_effects" data-source-line="85" data-uid="ent0046" id="cluster_side_effects"><rect fill="#FFFFFF" height="125.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="285" x="2506.84" y="730.7773"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92.21" x="2603.235" y="746.8525">Side Effects</text></g><!--cluster Thunder (Rust)--><g class="cluster" data-entity="Thunder .Rust." data-source-line="93" data-uid="ent0048" id="cluster_Thunder .Rust."><path d="M567.34,496.7473 L689.4591,496.7473 A3.75,3.75 0 0 1 691.9591,499.2473 L698.9591,519.762 L1008.34,519.762 A2.5,2.5 0 0 1 1010.84,522.262 L1010.84,1692.4473 A2.5,2.5 0 0 1 1008.34,1694.9473 L567.34,1694.9473 A2.5,2.5 0 0 1 564.84,1692.4473 L564.84,499.2473 A2.5,2.5 0 0 1 567.34,496.7473" fill="#FFF3E0" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="564.84" x2="698.9591" y1="519.762" y2="519.762"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="121.1191" x="568.84" y="512.8225">Thunder (Rust)</text></g><!--cluster thunder--><g class="cluster" data-entity="thunder" data-source-line="94" data-uid="ent0049" id="cluster_thunder"><rect fill="#FFFFFF" height="724.65" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="382" x="596.84" y="938.2973"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="204.668" x="685.506" y="954.3725">Thunder In-Memory Store</text></g><!--cluster Per-User Stores--><g class="cluster" data-entity="Per-User Stores" data-source-line="95" data-uid="ent0050" id="cluster_Per-User Stores"><rect fill="#FFFFFF" height="640.65" rx="35" ry="35" style="stroke:#000000;stroke-width:1;" width="310" x="628.84" y="990.2973"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="124.4482" x="721.6159" y="1011.3725">Per-User Stores</text></g><!--cluster kafka_listener--><g class="cluster" data-entity="kafka_listener" data-source-line="101" data-uid="ent0054" id="cluster_kafka_listener"><rect fill="#FFFFFF" height="142.03" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="240" x="738.84" y="548.7473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113.5039" x="802.088" y="564.8225">Kafka Listener</text></g><!--cluster Phoenix (Python/JAX)--><g class="cluster" data-entity="Phoenix .Python.JAX." data-source-line="109" data-uid="ent0056" id="cluster_Phoenix .Python.JAX."><path d="M3974.34,1383.9273 L4152.9035,1383.9273 A3.75,3.75 0 0 1 4155.4035,1386.4273 L4162.4035,1406.942 L5749.34,1406.942 A2.5,2.5 0 0 1 5751.84,1409.442 L5751.84,2194.9773 A2.5,2.5 0 0 1 5749.34,2197.4773 L3974.34,2197.4773 A2.5,2.5 0 0 1 3971.84,2194.9773 L3971.84,1386.4273 A2.5,2.5 0 0 1 3974.34,1383.9273" fill="#F3E5F5" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="3971.84" x2="4162.4035" y1="1406.942" y2="1406.942"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="177.5635" x="3975.84" y="1400.0025">Phoenix (Python/JAX)</text></g><!--cluster phoenix_retrieval--><g class="cluster" data-entity="phoenix_retrieval" data-source-line="110" data-uid="ent0057" id="cluster_phoenix_retrieval"><rect fill="#FFFFFF" height="456.55" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="463" x="4003.84" y="1471.4173"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="138.9541" x="4165.8629" y="1487.4925">Phoenix Retrieval</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="155.4629" x="4157.6086" y="1504.5071">(Two-Tower Model)</text></g><!--cluster phoenix_ranking--><g class="cluster" data-entity="phoenix_ranking" data-source-line="116" data-uid="ent0061" id="cluster_phoenix_ranking"><rect fill="#FFFFFF" height="729.55" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="1213" x="4506.84" y="1435.9273"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132.2686" x="5047.2057" y="1452.0025">Phoenix Ranking</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164.4385" x="5031.1208" y="1469.0171">(Transformer Model)</text></g><!--cluster Hash-Based Embeddings--><g class="cluster" data-entity="Hash-Based Embeddings" data-source-line="117" data-uid="ent0062" id="cluster_Hash-Based Embeddings"><rect fill="#FFFFFF" height="109.02" rx="35" ry="35" style="stroke:#000000;stroke-width:1;" width="1007" x="4541.84" y="1521.9273"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194.1611" x="4948.2594" y="1543.0025">Hash-Based Embeddings</text></g><!--cluster grok_transformer--><g class="cluster" data-entity="grok_transformer" data-source-line="125" data-uid="ent0068" id="cluster_grok_transformer"><rect fill="#FFFFFF" height="373.53" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="998" x="4546.84" y="1751.9473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="139.7881" x="4975.946" y="1768.0225">Grok Transformer</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="169.292" x="4961.194" y="1785.0371">(Candidate Isolation)</text></g><!--cluster Candidate Pipeline (Rust)--><g class="cluster" data-entity="Candidate Pipeline .Rust." data-source-line="139" data-uid="ent0075" id="cluster_Candidate Pipeline .Rust."><path d="M4599.34,58.7373 L4802.5539,58.7373 A3.75,3.75 0 0 1 4805.0539,61.2373 L4812.0539,81.752 L5619.34,81.752 A2.5,2.5 0 0 1 5621.84,84.252 L5621.84,1357.4273 A2.5,2.5 0 0 1 5619.34,1359.9273 L4599.34,1359.9273 A2.5,2.5 0 0 1 4596.84,1357.4273 L4596.84,61.2373 A2.5,2.5 0 0 1 4599.34,58.7373" fill="#E8F5E9" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="4596.84" x2="4812.0539" y1="81.752" y2="81.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="202.2139" x="4600.84" y="74.8125">Candidate Pipeline (Rust)</text></g><!--cluster cp_traits--><g class="cluster" data-entity="cp_traits" data-source-line="140" data-uid="ent0076" id="cluster_cp_traits"><rect fill="#FFFFFF" height="756.55" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="344" x="4628.84" y="110.7373"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113.0801" x="4744.3" y="126.8125">Pipeline Traits</text></g><!--cluster cp_executor--><g class="cluster" data-entity="cp_executor" data-source-line="150" data-uid="ent0084" id="cluster_cp_executor"><rect fill="#FFFFFF" height="1022.19" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="577" x="5012.84" y="305.7373"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132.3574" x="5235.1613" y="321.8125">PipelineExecutor</text></g><!--entity user--><g class="entity" data-entity="user" data-source-line="20" data-uid="ent0009" id="entity_user"><ellipse cx="4202.8377" cy="1034.7973" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M4202.8377,1042.7973 L4202.8377,1069.7973 M4189.8377,1050.7973 L4215.8377,1050.7973 M4202.8377,1069.7973 L4189.8377,1084.7973 M4202.8377,1069.7973 L4215.8377,1084.7973" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="4186.91" y="1100.8725">User</text></g><!--entity global_corpus--><g class="entity" data-entity="global_corpus" data-source-line="21" data-uid="ent0010" id="entity_global_corpus"><path d="M4410.703,1042.778 C4412.6599,1036.2873 4417.8744,1035.8784 4422.4623,1039.8094 C4425.1693,1033.4116 4431.0919,1033.118 4434.5652,1039.0577 C4437.7917,1034.1611 4441.2716,1032.8678 4445.2495,1038.2788 C4448.1245,1032.2723 4452.7625,1030.9927 4457.3123,1036.5284 C4461.7052,1030.6993 4465.6457,1030.7169 4470.1298,1036.4271 C4472.6845,1030.5813 4476.9103,1029.4018 4481.1889,1034.7193 C4485.6124,1029.2918 4489.7903,1030.53 4492.547,1036.3957 C4496.1522,1029.8632 4502.1222,1030.4977 4504.8821,1037.1845 C4509.2442,1032.307 4512.7892,1033.3252 4515.7587,1038.6667 C4519.4516,1032.7497 4524.2844,1033.464 4527.6878,1038.969 C4532.6709,1033.8144 4536.4561,1035.4458 4539.2703,1041.2594 C4542.4647,1037.1884 4546.8959,1037.6108 4549.4915,1041.9841 C4556.5382,1042.8168 4558.7721,1048.3237 4554.1641,1053.775 C4560.6824,1056.9247 4561.8506,1060.9273 4557.2778,1066.7406 C4561.3332,1072.2353 4560.1554,1076.0661 4554.0411,1078.8405 C4558.2676,1083.9178 4557.1453,1089.228 4550.3689,1090.9758 C4546.3294,1096.0562 4542.7997,1096.49 4539.231,1090.502 C4536.6354,1097.0867 4532.0186,1097.0544 4527.676,1092.2789 C4525.8336,1099.7432 4519.3093,1099.3634 4515.1047,1094.7346 C4511.7376,1099.487 4507.723,1099.374 4505.0108,1094.0768 C4501.8728,1101.2132 4496.9754,1101.2832 4492.4655,1095.3985 C4489.8827,1102.5253 4484.5014,1102.2335 4480.1129,1097.2386 C4476.1611,1101.5089 4471.4243,1101.9153 4468.7373,1095.8471 C4464.814,1102.0992 4461.2333,1100.9685 4457.317,1095.8402 C4453.211,1101.0195 4447.9168,1101.2871 4445.2634,1094.3903 C4441.1331,1098.0983 4436.9463,1098.2433 4434.6147,1092.3876 C4430.3266,1098.0422 4425.7387,1097.4872 4422.5213,1091.2946 C4418.2754,1095.7689 4414.8458,1095.5784 4412.3796,1089.5724 C4406.8601,1086.9484 4404.6698,1083.5264 4409.6169,1078.3303 C4403.7343,1075.2494 4402.1613,1071.7858 4406.7479,1066.2239 C4401.8127,1061.3766 4404.0579,1055.9945 4409.9703,1054.0089 C4405.3163,1049.8794 4404.4473,1046.1958 4410.703,1042.778" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.2119" x="4417.42" y="1061.8625">Global Corpus</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.8379" x="4417.42" y="1078.8771">(Millions of Posts)</text></g><!--entity kafka--><g class="entity" data-entity="kafka" data-source-line="12" data-uid="ent0004" id="entity_kafka"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="165.2637" x="3809.21" y="1037.7873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.8193" x="3819.21" y="1061.8625">Post Events</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145.2637" x="3819.21" y="1078.8771">(Post Create/Delete)</text></g><!--entity social_graph--><g class="entity" data-entity="social_graph" data-source-line="15" data-uid="ent0006" id="entity_social_graph"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="124.1729" x="4030.76" y="1037.7873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9717" x="4040.76" y="1061.8625">Following List</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.1729" x="4040.76" y="1078.8771">Blocked/Muted</text></g><!--entity content_store--><g class="entity" data-entity="content_store" data-source-line="18" data-uid="ent0008" id="entity_content_store"><rect fill="#FFFFFF" height="71.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="119.791" x="4250.95" y="1029.2873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99.791" x="4260.95" y="1053.3625">Post Metadata</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.3701" x="4260.95" y="1070.3771">Author Info</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98.0957" x="4260.95" y="1087.3918">Media Entities</text></g><!--entity selector--><g class="entity" data-entity="selector" data-source-line="76" data-uid="ent0042" id="entity_selector"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="170.582" x="2954.55" y="2482.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132.5967" x="2964.55" y="2507.0625">TopKScoreSelector</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="150.582" x="2964.55" y="2524.0771">(Sort &amp; Select Top K)</text></g><g class="entity" data-entity="req_in" data-source-line="29" data-uid="ent0013" id="entity_req_in"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="56.8066" x="3119.7767" y="618.8179">Request</text><rect fill="#FFFFFF" height="12" style="stroke:#000000;stroke-width:1.5;" width="12" x="3142.18" y="633.7573"/></g><g class="entity" data-entity="resp_out" data-source-line="30" data-uid="ent0014" id="entity_resp_out"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.0811" x="3012.7995" y="1296.9925">Response</text><rect fill="#FFFFFF" height="12" style="stroke:#000000;stroke-width:1.5;" width="12" x="3040.34" y="1270.9173"/></g><!--entity uasqh--><g class="entity" data-entity="uasqh" data-source-line="35" data-uid="ent0016" id="entity_uasqh"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="226.4453" x="3231.62" y="1037.7873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="206.4453" x="3241.62" y="1061.8625">UserActionSeqQueryHydrator</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.8047" x="3241.62" y="1078.8771">(Engagement History)</text></g><!--entity ufqh--><g class="entity" data-entity="ufqh" data-source-line="36" data-uid="ent0017" id="entity_ufqh"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="217.0117" x="3463.34" y="1037.7873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="197.0117" x="3473.34" y="1061.8625">UserFeaturesQueryHydrator</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.6865" x="3473.34" y="1078.8771">(Following List)</text></g><!--entity thunder_src--><g class="entity" data-entity="thunder_src" data-source-line="41" data-uid="ent0019" id="entity_thunder_src"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="154.333" x="2812.68" y="1569.4173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.7773" x="2822.68" y="1593.4925">ThunderSource</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="134.333" x="2822.68" y="1610.5071">(In-Network Posts)</text></g><!--entity phoenix_src--><g class="entity" data-entity="phoenix_src" data-source-line="42" data-uid="ent0020" id="entity_phoenix_src"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="184.7529" x="2972.47" y="1569.4173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.6602" x="2982.47" y="1593.4925">PhoenixSource</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="164.7529" x="2982.47" y="1610.5071">(Out-of-Network Posts)</text></g><!--entity cdc_h--><g class="entity" data-entity="cdc_h" data-source-line="47" data-uid="ent0022" id="entity_cdc_h"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="218.2012" x="1900.74" y="1849.9473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="198.2012" x="1910.74" y="1874.0225">CoreDataCandidateHydrator</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129.2813" x="1910.74" y="1891.0371">(Post Text, Media)</text></g><!--entity giz_h--><g class="entity" data-entity="giz_h" data-source-line="48" data-uid="ent0023" id="entity_giz_h"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="159.2275" x="1736.23" y="1849.9473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="139.2275" x="1746.23" y="1874.0225">GizmoduckHydrator</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93.085" x="1746.23" y="1891.0371">(Author Info)</text></g><!--entity vd_h--><g class="entity" data-entity="vd_h" data-source-line="49" data-uid="ent0024" id="entity_vd_h"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="181.6152" x="1346.03" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="161.6152" x="1356.03" y="1882.5225">VideoDurationHydrator</text></g><!--entity sub_h--><g class="entity" data-entity="sub_h" data-source-line="50" data-uid="ent0025" id="entity_sub_h"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="168.8936" x="1562.4" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="148.8936" x="1572.4" y="1882.5225">SubscriptionHydrator</text></g><!--entity vf_h--><g class="entity" data-entity="vf_h" data-source-line="51" data-uid="ent0026" id="entity_vf_h"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="170.1104" x="1757.79" y="2055.9573"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="150.1104" x="1767.79" y="2080.0325">VFCandidateHydrator</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="133.2188" x="1767.79" y="2097.0471">(Visibility Filtering)</text></g><!--entity dup_f--><g class="entity" data-entity="dup_f" data-source-line="56" data-uid="ent0028" id="entity_dup_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="162.4473" x="2225.62" y="2064.4573"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="142.4473" x="2235.62" y="2088.5325">DropDuplicatesFilter</text></g><!--entity age_f--><g class="entity" data-entity="age_f" data-source-line="57" data-uid="ent0029" id="entity_age_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="82.1934" x="2422.75" y="2064.4573"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62.1934" x="2432.75" y="2088.5325">AgeFilter</text></g><!--entity self_f--><g class="entity" data-entity="self_f" data-source-line="58" data-uid="ent0030" id="entity_self_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="124.5146" x="2539.59" y="2064.4573"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.5146" x="2549.59" y="2088.5325">SelfTweetFilter</text></g><!--entity rt_f--><g class="entity" data-entity="rt_f" data-source-line="59" data-uid="ent0031" id="entity_rt_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="208.3369" x="2214.67" y="2342.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="188.3369" x="2224.67" y="2367.0625">RetweetDeduplicationFilter</text></g><!--entity sub_f--><g class="entity" data-entity="sub_f" data-source-line="60" data-uid="ent0032" id="entity_sub_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="206.7988" x="2457.44" y="2342.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="186.7988" x="2467.44" y="2367.0625">IneligibleSubscriptionFilter</text></g><!--entity seen_f--><g class="entity" data-entity="seen_f" data-source-line="61" data-uid="ent0033" id="entity_seen_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="199.375" x="2699.15" y="2342.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="179.375" x="2709.15" y="2367.0625">PreviouslySeenPostsFilter</text></g><!--entity served_f--><g class="entity" data-entity="served_f" data-source-line="62" data-uid="ent0034" id="entity_served_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="213.498" x="2215.09" y="2491.4973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="193.498" x="2225.09" y="2515.5725">PreviouslyServedPostsFilter</text></g><!--entity muted_f--><g class="entity" data-entity="muted_f" data-source-line="63" data-uid="ent0035" id="entity_muted_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="159.7744" x="2462.96" y="2491.4973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="139.7744" x="2472.96" y="2515.5725">MutedKeywordFilter</text></g><!--entity social_f--><g class="entity" data-entity="social_f" data-source-line="64" data-uid="ent0036" id="entity_social_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="184.9785" x="2657.35" y="2491.4973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="164.9785" x="2667.35" y="2515.5725">AuthorSocialgraphFilter</text></g><!--entity phoenix_scorer--><g class="entity" data-entity="phoenix_scorer" data-source-line="69" data-uid="ent0038" id="entity_phoenix_scorer"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="133.8525" x="3544.92" y="2334.4773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100.7754" x="3554.92" y="2358.5525">PhoenixScorer</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.8525" x="3554.92" y="2375.5671">(ML Predictions)</text></g><!--entity weighted_scorer--><g class="entity" data-entity="weighted_scorer" data-source-line="70" data-uid="ent0039" id="entity_weighted_scorer"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="150.1631" x="3180.76" y="2334.4773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.8359" x="3190.76" y="2358.5525">WeightedScorer</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.1631" x="3190.76" y="2375.5671">(Combine Actions)</text></g><!--entity div_scorer--><g class="entity" data-entity="div_scorer" data-source-line="71" data-uid="ent0040" id="entity_div_scorer"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="175.0938" x="3365.3" y="2334.4773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.0938" x="3375.3" y="2358.5525">AuthorDiversityScorer</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="152.6875" x="3375.3" y="2375.5671">(Attenuate Repeated)</text></g><!--entity oon_scorer--><g class="entity" data-entity="oon_scorer" data-source-line="72" data-uid="ent0041" id="entity_oon_scorer"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="142.7871" x="3184.45" y="2482.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.1621" x="3194.45" y="2507.0625">OONScorer</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122.7871" x="3194.45" y="2524.0771">(Out-of-Network)</text></g><!--entity vf_f--><g class="entity" data-entity="vf_f" data-source-line="80" data-uid="ent0044" id="entity_vf_f"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="198.2197" x="3283.73" y="2690.0173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53.1768" x="3293.73" y="2714.0925">VFFilter</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="178.2197" x="3293.73" y="2731.1071">(Deleted/Spam/Violence)</text></g><!--entity conv_f--><g class="entity" data-entity="conv_f" data-source-line="81" data-uid="ent0045" id="entity_conv_f"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="193.1406" x="3487.27" y="2698.5273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="173.1406" x="3497.27" y="2722.6025">DedupConversationFilter</text></g><!--entity cache_se--><g class="entity" data-entity="cache_se" data-source-line="86" data-uid="ent0047" id="entity_cache_se"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="217.9756" x="2530.85" y="794.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="197.9756" x="2540.85" y="818.8525">CacheRequestInfoSideEffect</text></g><!--entity thunder_orig--><g class="entity" data-entity="thunder_orig" data-source-line="96" data-uid="ent0051" id="entity_thunder_orig"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="111.5537" x="645.07" y="1046.2973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91.5537" x="655.07" y="1070.3725">OriginalPosts</text></g><!--entity thunder_rr--><g class="entity" data-entity="thunder_rr" data-source-line="97" data-uid="ent0052" id="entity_thunder_rr"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="131.8701" x="790.91" y="1046.2973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.8701" x="800.91" y="1070.3725">Replies/Reposts</text></g><!--entity thunder_video--><g class="entity" data-entity="thunder_video" data-source-line="98" data-uid="ent0053" id="entity_thunder_video"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="96.0156" x="652.83" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="76.0156" x="662.83" y="1602.0025">VideoPosts</text></g><!--entity kafka_listeners--><g class="entity" data-entity="kafka_listeners" data-source-line="102" data-uid="ent0055" id="entity_kafka_listeners"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="183.8574" x="770.91" y="612.7473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145.3867" x="780.91" y="636.8225">TweetEventsListener</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="163.8574" x="780.91" y="653.8371">TweetEventsListenerV2</text></g><!--entity user_tower--><g class="entity" data-entity="user_tower" data-source-line="111" data-uid="ent0058" id="entity_user_tower"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="238.0459" x="4196.82" y="1569.4173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="79.6729" x="4206.82" y="1593.4925">User Tower</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="218.0459" x="4206.82" y="1610.5071">(User + History &#8594; Embedding)</text></g><!--entity candidate_tower--><g class="entity" data-entity="candidate_tower" data-source-line="112" data-uid="ent0059" id="entity_candidate_tower"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="164.71" x="4027.49" y="1569.4173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.4121" x="4037.49" y="1593.4925">Candidate Tower</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="144.71" x="4037.49" y="1610.5071">(Post &#8594; Embedding)</text></g><!--entity ann_search--><g class="entity" data-entity="ann_search" data-source-line="113" data-uid="ent0060" id="entity_ann_search"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="187.4053" x="4125.14" y="1849.9473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.8838" x="4135.14" y="1874.0225">ANN Search</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="167.4053" x="4135.14" y="1891.0371">(Dot Product Similarity)</text></g><!--entity user_emb--><g class="entity" data-entity="user_emb" data-source-line="118" data-uid="ent0063" id="entity_user_emb"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="137.5508" x="4558.07" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117.5508" x="4568.07" y="1602.0025">UserEmbeddings</text></g><!--entity hist_post_emb--><g class="entity" data-entity="hist_post_emb" data-source-line="119" data-uid="ent0064" id="entity_hist_post_emb"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="185.375" x="4908.15" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="165.375" x="4918.15" y="1602.0025">HistoryPostEmbeddings</text></g><!--entity hist_auth_emb--><g class="entity" data-entity="hist_auth_emb" data-source-line="120" data-uid="ent0065" id="entity_hist_auth_emb"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="202.9023" x="4700.39" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="182.9023" x="4710.39" y="1602.0025">HistoryAuthorEmbeddings</text></g><!--entity cand_post_emb--><g class="entity" data-entity="cand_post_emb" data-source-line="121" data-uid="ent0066" id="entity_cand_post_emb"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="206.04" x="5326.82" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="186.04" x="5336.82" y="1602.0025">CandidatePostEmbeddings</text></g><!--entity cand_auth_emb--><g class="entity" data-entity="cand_auth_emb" data-source-line="122" data-uid="ent0067" id="entity_cand_auth_emb"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="223.5674" x="5098.06" y="1577.9273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="203.5674" x="5108.06" y="1602.0025">CandidateAuthorEmbeddings</text></g><!--entity gt_user--><g class="entity" data-entity="gt_user" data-source-line="126" data-uid="ent0069" id="entity_gt_user"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="192.2861" x="4852.7" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="172.2861" x="4862.7" y="1882.5225">User Embedding [B,1,D]</text></g><!--entity gt_hist--><g class="entity" data-entity="gt_hist" data-source-line="127" data-uid="ent0070" id="entity_gt_hist"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="218.3242" x="5049.68" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="198.3242" x="5059.68" y="1882.5225">History Embeddings [B,S,D]</text></g><!--entity gt_cand--><g class="entity" data-entity="gt_cand" data-source-line="128" data-uid="ent0071" id="entity_gt_cand"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="239.1943" x="5273.25" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="219.1943" x="5283.25" y="1882.5225">Candidate Embeddings [B,C,D]</text></g><!--entity gt_attn--><g class="entity" data-entity="gt_attn" data-source-line="129" data-uid="ent0072" id="entity_gt_attn"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="169.9873" x="4677.85" y="1849.9473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105.2256" x="4687.85" y="1874.0225">Attention Mask</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="149.9873" x="4687.85" y="1891.0371">(Candidates isolated)</text></g><!--entity gt_ln--><g class="entity" data-entity="gt_ln" data-source-line="130" data-uid="ent0073" id="entity_gt_ln"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.2842" x="4570.7" y="1858.4473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82.2842" x="4580.7" y="1882.5225">Layer Norm</text></g><!--entity gt_unembed--><g class="entity" data-entity="gt_unembed" data-source-line="131" data-uid="ent0074" id="entity_gt_unembed"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="116.9951" x="4570.34" y="2064.4573"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96.9951" x="4580.34" y="2088.5325">Unembedding</text></g><!--entity i_source--><g class="entity" data-entity="i_source" data-source-line="141" data-uid="ent0077" id="entity_i_source"><ellipse cx="4684.84" cy="204.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48.5352" x="4660.5724" y="235.8125">Source</text></g><!--entity i_hydrator--><g class="entity" data-entity="i_hydrator" data-source-line="142" data-uid="ent0078" id="entity_i_hydrator"><ellipse cx="4789.84" cy="204.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61.8994" x="4758.8903" y="235.8125">Hydrator</text></g><!--entity i_filter--><g class="entity" data-entity="i_filter" data-source-line="143" data-uid="ent0079" id="entity_i_filter"><ellipse cx="4889.84" cy="204.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="35.5605" x="4872.0597" y="235.8125">Filter</text></g><!--entity i_scorer--><g class="entity" data-entity="i_scorer" data-source-line="144" data-uid="ent0080" id="entity_i_scorer"><ellipse cx="4682.84" cy="396.7473" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.6504" x="4660.0148" y="427.8225">Scorer</text></g><!--entity i_selector--><g class="entity" data-entity="i_selector" data-source-line="145" data-uid="ent0081" id="entity_i_selector"><ellipse cx="4783.84" cy="396.7473" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.374" x="4755.153" y="427.8225">Selector</text></g><!--entity i_side_effect--><g class="entity" data-entity="i_side_effect" data-source-line="146" data-uid="ent0082" id="entity_i_side_effect"><ellipse cx="4897.84" cy="396.7473" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.3213" x="4862.6794" y="427.8225">SideEffect</text></g><!--entity i_query_hydrator--><g class="entity" data-entity="i_query_hydrator" data-source-line="147" data-uid="ent0083" id="entity_i_query_hydrator"><ellipse cx="4712.84" cy="813.2873" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.3779" x="4660.651" y="844.3625">QueryHydrator</text></g><!--entity cp_qh--><g class="entity" data-entity="cp_qh" data-source-line="151" data-uid="ent0085" id="entity_cp_qh"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="131.1045" x="5070.29" y="369.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.1045" x="5080.29" y="393.8125">QueryHydration</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="63.8135" x="5080.29" y="410.8271">(Parallel)</text></g><!--entity cp_sf--><g class="entity" data-entity="cp_sf" data-source-line="152" data-uid="ent0086" id="entity_cp_sf"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="106.5908" x="5236.55" y="369.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.5908" x="5246.55" y="393.8125">SourceFetch</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="63.8135" x="5246.55" y="410.8271">(Parallel)</text></g><!--entity cp_h--><g class="entity" data-entity="cp_h" data-source-line="153" data-uid="ent0087" id="entity_cp_h"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="88.626" x="5378.53" y="369.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="68.626" x="5388.53" y="393.8125">Hydration</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="63.8135" x="5388.53" y="410.8271">(Parallel)</text></g><!--entity cp_f--><g class="entity" data-entity="cp_f" data-source-line="154" data-uid="ent0088" id="entity_cp_f"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="107.0146" x="5082.34" y="786.2673"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="56.9844" x="5092.34" y="810.3425">Filtering</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="5092.34" y="827.3571">(Sequential)</text></g><!--entity cp_s--><g class="entity" data-entity="cp_s" data-source-line="155" data-uid="ent0089" id="entity_cp_s"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="107.0146" x="5224.34" y="786.2673"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.7598" x="5234.34" y="810.3425">Scoring</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="5234.34" y="827.3571">(Sequential)</text></g><!--entity cp_sel--><g class="entity" data-entity="cp_sel" data-source-line="156" data-uid="ent0090" id="entity_cp_sel"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.1006" x="5366.79" y="794.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="64.1006" x="5376.79" y="818.8525">Selection</text></g><!--entity cp_psh--><g class="entity" data-entity="cp_psh" data-source-line="157" data-uid="ent0091" id="entity_cp_psh"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="182.4766" x="5044.6" y="1249.8973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.4766" x="5054.6" y="1273.9725">PostSelectionHydration</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="63.8135" x="5054.6" y="1290.9871">(Parallel)</text></g><!--entity cp_psf--><g class="entity" data-entity="cp_psf" data-source-line="158" data-uid="ent0092" id="entity_cp_psf"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="170.835" x="5262.42" y="1249.8973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="150.835" x="5272.42" y="1273.9725">PostSelectionFiltering</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87.0146" x="5272.42" y="1290.9871">(Sequential)</text></g><!--entity cp_se--><g class="entity" data-entity="cp_se" data-source-line="159" data-uid="ent0093" id="entity_cp_se"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="97.6152" x="5468.03" y="1249.8973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.6152" x="5478.03" y="1273.9725">SideEffects</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54.0176" x="5478.03" y="1290.9871">(Async)</text></g><g class="entity" data-entity="GMN138" data-source-line="247" data-uid="ent0139" id="entity_GMN138"><path d="M5637.85,312.7573 L5637.85,480.7505 L5901.8446,480.7505 L5901.8446,322.7573 L5891.8446,312.7573 L5637.85,312.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M5891.8446,312.7573 L5891.8446,322.7573 L5901.8446,322.7573 L5891.8446,312.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180.7305" x="5643.85" y="330.8271">Pipeline Execution Order</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.5581" x="5643.85" y="346.6264">1. QueryHydration (Parallel)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.7954" x="5643.85" y="362.4258">2. SourceFetch (Parallel)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.1138" x="5643.85" y="378.2251">3. Hydration (Parallel)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.8477" x="5643.85" y="394.0244">4. Filtering (Sequential)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.9248" x="5643.85" y="409.8237">5. Scoring (Sequential)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77.0859" x="5643.85" y="425.623">6. Selection</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="232.2607" x="5643.85" y="441.4223">7. PostSelectionHydration (Parallel)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242.9946" x="5643.85" y="457.2217">8. PostSelectionFiltering (Sequential)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.3647" x="5643.85" y="473.021">9. SideEffects (Async)</text></g><g class="entity" data-entity="GMN141" data-source-line="263" data-uid="ent0142" id="entity_GMN141"><path d="M5638,909.7073 L5638,1219.8943 L6119.6938,1219.8943 L6119.6938,919.7073 L6109.6938,909.7073 L5638,909.7073" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M6109.6938,909.7073 L6109.6938,919.7073 L6119.6938,919.7073 L6109.6938,909.7073" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="234.3237" x="5644" y="927.7771">Phoenix ML Model (Grok-based)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="5644" y="943.5764">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.7847" x="5644" y="959.3758">Retrieval (Two-Tower)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="5810.7847" y="959.3758">:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="434.9985" x="5644" y="975.1751">&#8226; User Tower: user_features + engagement_history &#8594; embedding</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="311.8096" x="5644" y="990.9744">&#8226; Candidate Tower: post_content &#8594; embedding</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="366.7041" x="5644" y="1006.7737">&#8226; ANN Search: dot_product_similarity(user, candidates)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="5644" y="1022.573">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168.9111" x="5644" y="1038.3723">Ranking (Transformer)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="5812.9111" y="1038.3723">:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="417.3203" x="5644" y="1054.1717">&#8226; Candidate Isolation: candidates CANNOT attend to each other</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.3218" x="5644" y="1069.971">&#8226; Multi-Action Prediction:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="277.8115" x="5653.1406" y="1085.7703">- P(favorite), P(reply), P(repost), P(quote)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="266.9126" x="5653.1406" y="1101.5696">- P(click), P(profile_click), P(video_view)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250.8911" x="5653.1406" y="1117.3689">- P(photo_expand), P(share), P(dwell)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="243.4707" x="5653.1406" y="1133.1682">- P(follow_author), P(not_interested)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.8955" x="5653.1406" y="1148.9676">- P(block_author), P(mute_author), P(report)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="5644" y="1164.7669">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180.2925" x="5644" y="1180.5662">Hash-Based Embeddings</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="5824.2925" y="1180.5662">:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="232.5781" x="5644" y="1196.3655">&#8226; Multiple hash functions for lookup</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="460.6938" x="5644" y="1212.1648">&#8226; num_user_hashes=2, num_item_hashes=2, num_author_hashes=2</text></g><g class="entity" data-entity="GMN144" data-source-line="285" data-uid="ent0145" id="entity_GMN144"><path d="M232.49,1544.0373 L232.49,1648.8332 L549.1956,1648.8332 L549.1956,1554.0373 L539.1956,1544.0373 L232.49,1544.0373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M539.1956,1544.0373 L539.1956,1554.0373 L549.1956,1554.0373 L539.1956,1544.0373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="241.1094" x="238.49" y="1562.1071">Thunder - In-Network Post Store</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="238.49" y="1577.9064">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="295.7056" x="238.49" y="1593.7058">&#8226; Kafka events ingestion (post create/delete)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.8398" x="238.49" y="1609.5051">&#8226; Per-user in-memory stores</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="282.2168" x="238.49" y="1625.3044">&#8226; Automatic trim based on retention period</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268.2583" x="238.49" y="1641.1037">&#8226; Sub-millisecond lookups without DB hit</text></g><g class="entity" data-entity="GMN147" data-source-line="294" data-uid="ent0148" id="entity_GMN147"><path d="M5767.61,1998.9673 L5767.61,2166.9605 L5956.0675,2166.9605 L5956.0675,2008.9673 L5946.0675,1998.9673 L5767.61,1998.9673" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M5946.0675,1998.9673 L5946.0675,2008.9673 L5956.0675,2008.9673 L5946.0675,1998.9673" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136.4429" x="5773.61" y="2017.0371">Pre-Scoring Filters</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.4829" x="5773.61" y="2032.8364">&#8226; Drop Duplicates</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.3892" x="5773.61" y="2048.6358">&#8226; Age Filter (too old)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.5483" x="5773.61" y="2064.4351">&#8226; Self-Post Filter</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.0947" x="5773.61" y="2080.2344">&#8226; Retweet Deduplication</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.6665" x="5773.61" y="2096.0337">&#8226; Ineligible Subscription</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.3433" x="5773.61" y="2111.833">&#8226; Previously Seen Posts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.4575" x="5773.61" y="2127.6323">&#8226; Previously Served Posts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.7739" x="5773.61" y="2143.4317">&#8226; Muted Keywords</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163.6362" x="5773.61" y="2159.231">&#8226; Blocked/Muted Authors</text></g><g class="entity" data-entity="GMN150" data-source-line="307" data-uid="ent0151" id="entity_GMN150"><path d="M3760.61,2316.9873 L3760.61,2405.9839 L4079.0675,2405.9839 L4079.0675,2326.9873 L4069.0675,2316.9873 L3760.61,2316.9873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M4069.0675,2316.9873 L4069.0675,2326.9873 L4079.0675,2326.9873 L4069.0675,2316.9873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117.9839" x="3766.61" y="2335.0571">Scoring Pipeline</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.7886" x="3766.61" y="2350.8564">1. PhoenixScorer: ML predictions</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="274.644" x="3766.61" y="2366.6558">2. WeightedScorer: &#931;(weight &#215; P(action))</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.4575" x="3766.61" y="2382.4551">3. AuthorDiversityScorer: attenuate repeated</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244.061" x="3766.61" y="2398.2544">4. OONScorer: adjust out-of-network</text></g><!--link user to req_in--><g class="link" data-entity-1="user" data-entity-2="req_in" data-source-line="166" data-uid="lnk94" id="link_user_req_in"><path d="M4203.65,1025.5673 C4202.71,988.5373 4196.57,932.1373 4170.84,891.2873 C4099.9,778.6373 4053.32,761.9673 3928.84,714.7773 C3775.9,656.7873 3227.9184,642.5643 3161.3884,641.0443" fill="none" id="user-to-req_in" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3155.39,640.9073,3164.2963,645.1118,3160.3887,641.0215,3164.479,637.1139,3155.39,640.9073" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.3745" x="4163.44" y="810.8571">gRPC Request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="56.875" x="4180.6898" y="826.6564">(UserID)</text></g><!--link resp_out to user--><g class="link" data-entity-1="resp_out" data-entity-2="user" data-source-line="167" data-uid="lnk95" id="link_resp_out_user"><path d="M3057.05,1273.8673 C3078.12,1268.7273 3135.86,1255.2973 3184.84,1249.8973 C3239.32,1243.8973 4128.86,1255.1273 4170.84,1219.8973 C4203.91,1192.1473 4208.5921,1145.9524 4207.1421,1110.0524" fill="none" id="resp_out-to-user" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4206.9,1104.0573,4203.2665,1113.2114,4207.1018,1109.0532,4211.26,1112.8885,4206.9,1104.0573" style="stroke:#000000;stroke-width:1;"/></g><!--link kafka_listeners to kafka--><g class="link" data-entity-1="kafka_listeners" data-entity-2="kafka" data-source-line="169" data-uid="lnk96" id="link_kafka_listeners_kafka"><path d="M955.25,660.2673 C1193.81,709.5373 1850.44,838.2573 2404.84,883.2873 C2423.06,884.7673 3703.99,884.1973 3720.84,891.2873 C3792.18,921.2773 3845.8197,991.89 3872.3397,1032.33" fill="none" id="kafka_listeners-to-kafka" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3875.63,1037.3473,3874.0394,1027.6277,3872.8881,1033.1662,3867.3496,1032.0148,3875.63,1037.3473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.9321" x="2405.84" y="818.8571">Consume Events</text></g><!--link kafka_listener to thunder--><g class="link" data-entity-1="kafka_listener" data-entity-2="thunder" data-source-line="170" data-uid="lnk97" id="link_kafka_listener_thunder"><path d="M749.3504,690.999 C749.3772,691.1108 749.4042,691.2226 749.4314,691.3343 C749.8665,693.1219 750.3519,694.8972 750.8926,696.6486 C751.9739,700.1514 753.2763,703.5586 754.84,706.7773 C805.46,810.9373 884.98,788.7573 938.84,891.2873 C943.3025,899.7811 947.1514,908.7965 950.4702,918.0767 C952.1295,922.7168 953.6564,927.4231 955.0611,932.1634 C955.4123,933.3485 955.7558,934.5357 956.0919,935.7246 C956.2599,936.319 954.8293,931.1302 954.9936,931.7254" fill="none" id="kafka_listener-to-thunder" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="956.5904,937.509,958.0509,927.769,955.2597,932.6893,950.3394,929.8981,956.5904,937.509" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.4058" x="933.26" y="818.8571">Ingest Posts</text></g><!--link social_graph to ufqh--><g class="link" data-entity-1="social_graph" data-entity-2="ufqh" data-source-line="172" data-uid="lnk98" id="link_social_graph_ufqh"><path d="M4081.9,1037.3273 C4066.18,1000.5273 4034.25,934.8573 3990.84,891.2873 C3926.77,826.9673 3880.05,832.9273 3790.84,849.7773 C3741.13,859.1573 3724.07,859.3373 3684.84,891.2873 C3635.22,931.6873 3602.418,994.3194 3585.548,1032.0694" fill="none" id="social_graph-to-ufqh" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3583.1,1037.5473,3590.4239,1030.9625,3585.14,1032.9824,3583.1201,1027.6985,3583.1,1037.5473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.0957" x="3791.84" y="818.8571">Fetch Following List</text></g><!--link content_store to cdc_h--><g class="link" data-entity-1="content_store" data-entity-2="cdc_h" data-source-line="174" data-uid="lnk99" id="link_content_store_cdc_h"><path d="M4305.91,1100.7673 C4299.01,1136.2073 4282.98,1189.9573 4246.84,1219.8973 C4196.84,1261.3373 4166.11,1231.4673 4103.84,1249.8973 C3954.89,1293.9973 3872.56,1252.8073 3777.84,1375.9273 C3688.68,1491.8173 3836.73,1591.6873 3741.84,1702.9473 C3714.62,1734.8573 3692.39,1722.2273 3650.84,1727.9473 C3629.82,1730.8373 2141.97,1726.7373 2122.84,1735.9473 C2073.72,1759.5773 2041.7827,1810.7006 2024.6927,1844.2606" fill="none" id="content_store-to-cdc_h" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="2021.97,1849.6073,2029.6185,1843.4025,2024.2389,1845.1518,2022.4896,1839.7722,2021.97,1849.6073" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.5708" x="3778.84" y="1602.0071">Fetch Post Metadata</text></g><!--link content_store to giz_h--><g class="link" data-entity-1="content_store" data-entity-2="giz_h" data-source-line="175" data-uid="lnk100" id="link_content_store_giz_h"><path d="M4306.96,1100.4973 C4300.89,1136.8073 4285.49,1192.2773 4246.84,1219.8973 C4162.06,1280.4973 3870.84,1200.9473 3778.84,1249.8973 C3720.37,1281.0173 3745.53,1335.3673 3687.84,1367.9273 C3660.57,1383.3173 3645.41,1361.0673 3617.84,1375.9273 C3438.41,1472.6473 3508.24,1641.0673 3323.84,1727.9473 C3288.06,1744.7973 1934.21,1716.3573 1899.84,1735.9473 C1856.99,1760.3673 1835.3979,1810.5493 1824.8079,1843.8593" fill="none" id="content_store-to-giz_h" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1822.99,1849.5773,1829.5288,1842.2122,1824.5049,1844.8123,1821.9048,1839.7884,1822.99,1849.5773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.5371" x="3618.84" y="1602.0071">Fetch Author Info</text></g><!--link global_corpus to phoenix_retrieval--><g class="link" data-entity-1="global_corpus" data-entity-2="phoenix_retrieval" data-source-line="177" data-uid="lnk101" id="link_global_corpus_phoenix_retrieval"><path d="M4478.61,1096.9573 C4476.375,1153.2773 4471.4925,1276.3973 4467.14,1386.1786 C4466.0519,1413.6239 4464.9969,1440.2355 4464.0246,1464.7613 C4463.9639,1466.2942 4464.1411,1461.8236 4464.081,1463.3399" fill="none" id="global_corpus-to-phoenix_retrieval" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4463.8433,1469.3351,4468.1967,1460.5006,4464.0414,1464.3391,4460.203,1460.1838,4463.8433,1469.3351" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.1704" x="4473.45" y="1282.4871">Search Corpus</text></g><!--link req_in to query_hydrators--><g class="link" data-entity-1="req_in" data-entity-2="query_hydrators" data-source-line="182" data-uid="lnk102" id="link_req_in_query_hydrators"><path d="M3155.43,644.7173 C3198.11,670.1673 3440.46,812.0473 3655.84,883.2873 C3673.47,889.1173 3684.71,877.2273 3696.84,891.2873 C3721.53,919.8823 3723.855,962.1223 3719.8487,997.6473 C3718.8472,1006.5286 3717.4499,1014.9901 3715.9075,1022.7139 C3715.1363,1026.5757 3714.3287,1030.2532 3713.5163,1033.7064 C3713.3131,1034.5697 3714.5293,1029.5893 3714.3261,1030.424" fill="none" id="req_in-to-query_hydrators" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3712.9064,1036.2536,3718.9223,1028.4556,3714.0895,1031.3956,3711.1495,1026.5627,3712.9064,1036.2536" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.3027" x="3656.84" y="818.8571">1. Query Hydration</text></g><!--link query_hydrators to sources--><g class="link" data-entity-1="query_hydrators" data-entity-2="sources" data-source-line="184" data-uid="lnk103" id="link_query_hydrators_sources"><path d="M3712.8681,1094.9986 C3713.0418,1095.7933 3713.2146,1096.6 3713.3863,1097.4182 C3713.7296,1099.0544 3714.0682,1100.7362 3714.3984,1102.4593 C3715.7194,1109.3516 3716.9081,1116.9032 3717.745,1124.8311 C3721.0925,1156.5423 3718.81,1194.2723 3696.84,1219.8973 C3654.3,1269.5373 3608.05,1214.8973 3552.84,1249.8973 C3497.36,1285.0773 3509.57,1320.7573 3463.84,1367.9273 C3408.555,1424.9573 3339.135,1480.9623 3282.8875,1523.1361 C3254.7637,1544.2229 3229.9331,1561.852 3211.8091,1574.4225 C3202.747,1580.7077 3195.3616,1585.7283 3190.0796,1589.2841 C3189.7494,1589.5064 3194.4074,1586.3762 3194.0938,1586.5869" fill="none" id="query_hydrators-to-sources" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3189.1139,1589.9336,3198.8149,1588.2335,3193.2639,1587.1447,3194.3527,1581.5936,3189.1139,1589.9336" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.7969" x="3553.84" y="1282.4871">2. Fetch Candidates</text></g><!--link sources to hydrators--><g class="link" data-entity-1="sources" data-entity-2="hydrators" data-source-line="186" data-uid="lnk104" id="link_sources_hydrators"><path d="M3188.8654,1638.7145 C3188.879,1638.8855 3188.8924,1639.0567 3188.9056,1639.2281 C3188.9319,1639.571 3188.9571,1639.9148 3188.9813,1640.2595 C3189.0298,1640.9489 3189.074,1641.6418 3189.1138,1642.3378 C3189.1934,1643.7299 3189.255,1645.1346 3189.2965,1646.5486 C3189.3794,1649.3767 3189.3816,1652.2425 3189.2845,1655.1211 C3189.0904,1660.8783 3188.4993,1666.6868 3187.3639,1672.3476 C3185.0931,1683.6692 3180.645,1694.3998 3172.84,1702.9473 C3095.2,1787.9723 2841.1025,1831.2148 2604.7338,1853.2061 C2486.5494,1864.2017 2372.7972,1869.8845 2287.7505,1872.8209 C2245.2271,1874.2891 2209.8801,1875.0707 2184.7437,1875.4865 C2172.1754,1875.6944 2162.1598,1875.8109 2155.0761,1875.876 C2154.1907,1875.8841 2153.351,1875.8914 2152.5579,1875.898 C2152.1614,1875.9013 2157.7763,1875.857 2157.4031,1875.8599" fill="none" id="sources-to-hydrators" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="2151.4033,1875.9074,2160.4346,1879.8361,2156.4031,1875.8679,2160.3713,1871.8363,2151.4033,1875.9074" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.4106" x="3163.6" y="1725.0171">3. Candidate Hydration</text></g><!--link hydrators to pre_filters--><g class="link" data-entity-1="hydrators" data-entity-2="pre_filters" data-source-line="188" data-uid="lnk105" id="link_hydrators_pre_filters"><path d="M2151.7459,1878.5206 C2152.0871,1878.5425 2152.4377,1878.565 2152.7975,1878.5881 C2158.555,1878.9582 2166.6857,1879.4894 2176.8639,1880.176 C2197.2203,1881.5493 2225.7669,1883.5441 2259.8988,1886.114 C2328.1625,1891.2539 2418.7675,1898.6942 2510.875,1908.0636 C2695.09,1926.8023 2885.315,1953.2573 2914.84,1984.4573 C2918.5175,1988.3436 2921.4111,1992.7498 2923.658,1997.4892 C2923.9389,1998.0817 2924.2097,1998.6793 2924.4706,1999.2818 C2924.601,1999.583 2922.4358,1994.341 2922.5614,1994.6446" fill="none" id="hydrators-to-pre_filters" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="2924.8546,2000.1891,2925.111,1990.3436,2922.9436,1995.5687,2917.7184,1993.4012,2924.8546,2000.1891" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.1807" x="2879.76" y="1966.0371">4. Pre-Scoring Filter</text></g><!--link pre_filters to scorers--><g class="link" data-entity-1="pre_filters" data-entity-2="scorers" data-source-line="190" data-uid="lnk106" id="link_pre_filters_scorers"><path d="M2930.9452,2093.5368 C2931.1236,2093.7477 2931.3048,2093.9618 2931.4886,2094.179 C2932.2239,2095.048 2933.0018,2095.9673 2933.8206,2096.9349 C2940.3707,2104.6756 2949.5368,2115.5076 2960.4467,2128.4004 C2982.2666,2154.1861 3011.0619,2188.2148 3039.8563,2222.2423 C3068.6506,2256.2698 3097.4441,2290.2961 3119.2602,2316.0767 C3130.1682,2328.967 3139.3319,2339.7959 3145.8792,2347.5329 C3146.6977,2348.5 3147.4752,2349.4188 3148.2101,2350.2873 C3148.3939,2350.5044 3144.699,2346.1383 3144.8774,2346.3491" fill="none" id="pre_filters-to-scorers" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3148.7533,2350.9292,3145.9929,2341.4751,3145.5234,2347.1124,3139.8861,2346.6429,3148.7533,2350.9292" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.3013" x="3054.85" y="2235.5471">5. Score Candidates</text></g><!--link scorers to selector--><g class="link" data-entity-1="scorers" data-entity-2="selector" data-source-line="192" data-uid="lnk107" id="link_scorers_selector"><path d="M3148.7789,2366.6854 C3148.6905,2366.7333 3148.6016,2366.7816 3148.512,2366.8303 C3148.3328,2366.9276 3148.1512,2367.0266 3147.9672,2367.1271 C3147.231,2367.5291 3146.4563,2367.9559 3145.6458,2368.4071 C3139.1616,2372.017 3130.3856,2377.1867 3120.7412,2383.6561 C3101.4525,2396.5948 3078.69,2414.7323 3063.84,2435.9873 C3054.14,2449.8773 3049.5769,2462.127 3046.0069,2476.817" fill="none" id="scorers-to-selector" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3044.59,2482.6473,3050.6022,2474.8464,3045.7707,2477.7887,3042.8285,2472.9573,3044.59,2482.6473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.5503" x="3064.84" y="2450.0571">6. Select Top K</text></g><!--link selector to post_filters--><g class="link" data-entity-1="selector" data-entity-2="post_filters" data-source-line="194" data-uid="lnk108" id="link_selector_post_filters"><path d="M3079.38,2537.4673 C3103.11,2551.8873 3134.48,2568.4873 3164.84,2577.0173 C3164.84,2577.0173 3696.84,2610.0173 3696.84,2610.0173 C3713.395,2626.3523 3715.5925,2652.2898 3713.555,2674.4198 C3713.4277,2675.8029 3713.2838,2677.1712 3713.1258,2678.5213 C3713.0468,2679.1963 3713.7306,2673.916 3713.6449,2674.5816" fill="none" id="selector-to-post_filters" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3712.8786,2680.5324,3717.9953,2672.117,3713.5172,2675.5734,3710.0608,2671.0953,3712.8786,2680.5324" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.2051" x="3555.16" y="2599.0871">7. Post-Selection Filter</text></g><!--link post_filters to side_effects--><g class="link" data-entity-1="post_filters" data-entity-2="side_effects" data-source-line="196" data-uid="lnk109" id="link_post_filters_side_effects"><path d="M3712.8965,2675.0875 C3713.0207,2674.3897 3713.1453,2673.6863 3713.2701,2672.9775 C3713.5197,2671.56 3713.7703,2670.1209 3714.0213,2668.6626 C3714.5232,2665.746 3715.0264,2662.7521 3715.5254,2659.6983 C3716.5233,2653.5909 3717.5041,2647.2439 3718.4231,2640.7965 C3720.2612,2627.9017 3721.8525,2614.6048 3722.84,2602.0173 C3734.96,2447.5273 3740.69,2402.5073 3694.84,2254.4773 C3611.46,1985.2473 3520.79,1948.1673 3381.84,1702.9473 C3299.52,1557.6573 3339.92,1462.0273 3196.84,1375.9273 C3169.13,1359.2473 2935.7,1380.3773 2905.84,1367.9273 C2817.92,1331.2773 2788.31,1307.4773 2750.84,1219.8973 C2693.4,1085.6173 2677.54,1017.6073 2750.84,891.2873 C2754.44,885.0873 2760.45,888.9473 2764.84,883.2873 C2769.565,877.2023 2773.1156,870.0173 2775.7836,862.622 C2776.4506,860.7732 2777.0624,858.9112 2777.6236,857.05 C2777.6938,856.8173 2777.7631,856.5847 2777.8317,856.3521 C2777.866,856.2358 2776.2208,861.8797 2776.2547,861.7634" fill="none" id="post_filters-to-side_effects" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="2777.934,856.0032,2771.5749,863.5239,2776.5346,860.8034,2779.2551,865.7631,2777.934,856.0032" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94.2056" x="3559.06" y="1966.0371">8. Side Effects</text></g><!--link side_effects to resp_out--><g class="link" data-entity-1="side_effects" data-entity-2="resp_out" data-source-line="198" data-uid="lnk110" id="link_side_effects_resp_out"><path d="M2777.3622,856.959 C2777.2972,857.4201 2777.2319,857.8842 2777.1663,858.3513 C2776.6418,862.0882 2776.0995,866.0178 2775.5445,870.1221 C2771.1047,902.957 2765.8531,946.9767 2762.3888,993.0061 C2755.46,1085.0648 2755.68,1185.1623 2783.84,1219.8973 C2817.38,1261.2673 2993.0286,1272.9561 3034.4386,1275.1761" fill="none" id="side_effects-to-resp_out" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3040.43,1275.4973,3031.657,1271.0212,3035.4372,1275.2296,3031.2288,1279.0098,3040.43,1275.4973" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.3306" x="2784.84" y="1070.3771">9. Return Response</text></g><!--link thunder_src to thunder--><g class="link" data-entity-1="thunder_src" data-entity-2="thunder" data-source-line="203" data-uid="lnk111" id="link_thunder_src_thunder"><path d="M2812.42,1591.2173 C2477.72,1572.3073 1166.01,1490.7873 1032.84,1367.9273 C1008.0475,1345.0523 991.7031,1315.1392 981.1502,1283.0373 C980.4906,1281.0309 981.5993,1284.7565 980.9843,1282.7342" fill="none" id="thunder_src-to-thunder" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="979.2387,1276.9937,978.0302,1286.7682,980.6934,1281.7774,985.6841,1284.4407,979.2387,1276.9937" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.8706" x="1033.84" y="1274.4871">Fetch In-Network</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="34.3979" x="1073.5763" y="1290.2864">Posts</text></g><!--link thunder to thunder_src--><g class="link" data-entity-1="thunder" data-entity-2="thunder_src" data-source-line="204" data-uid="lnk112" id="link_thunder_thunder_src"><path d="M978.9858,1072.6581 C979.2336,1072.869 979.4865,1073.0844 979.7445,1073.3044 C980.7765,1074.1844 981.8897,1075.1368 983.0796,1076.159 C985.4594,1078.2033 988.1459,1080.5268 991.1028,1083.1076 C1002.9306,1093.4311 1019.0863,1107.8736 1037.2525,1125.0523 C1073.585,1159.4098 1117.96,1204.7123 1151.84,1249.8973 C1187.9,1297.9873 1168.17,1334.0873 1217.84,1367.9273 C1483.09,1548.6473 2513.2718,1586.5297 2806.2718,1593.7397" fill="none" id="thunder-to-thunder_src" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="2812.27,1593.8873,2803.3711,1589.6671,2807.2715,1593.7643,2803.1743,1597.6647,2812.27,1593.8873" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.5366" x="1218.84" y="1274.4871">Sub-millisecond</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="1247.0902" y="1290.2864">Lookup</text></g><!--link phoenix_src to phoenix_retrieval--><g class="link" data-entity-1="phoenix_src" data-entity-2="phoenix_retrieval" data-source-line="209" data-uid="lnk113" id="link_phoenix_src_phoenix_retrieval"><path d="M3068.47,1569.1673 C3076.27,1521.9273 3099.23,1425.2373 3160.84,1375.9273 C3263.76,1293.5473 3323.54,1338.3373 3455.34,1340.6673 C3676.67,1344.5873 4294.25,1219.4673 4450.84,1375.9273 C4484.175,1409.2323 4487.325,1461.4373 4481.6,1506.6923 C4478.7375,1529.3198 4473.6563,1550.2098 4469.02,1566.1311 C4468.4405,1568.1212 4467.8679,1570.0337 4467.3075,1571.8623 C4467.1674,1572.3194 4468.8055,1567.0407 4468.667,1567.4872" fill="none" id="phoenix_src-to-phoenix_retrieval" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4466.8895,1573.2179,4473.3762,1565.8069,4468.3707,1568.4423,4465.7353,1563.4369,4466.8895,1573.2179" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.0654" x="3345.34" y="1282.4871">Fetch OON Posts</text></g><!--link phoenix_retrieval to phoenix_src--><g class="link" data-entity-1="phoenix_retrieval" data-entity-2="phoenix_src" data-source-line="210" data-uid="lnk114" id="link_phoenix_retrieval_phoenix_src"><path d="M4466.9093,1573.1982 C4467.0481,1572.7512 4467.1878,1572.299 4467.3283,1571.8415 C4467.8902,1570.0114 4468.4643,1568.0974 4469.0453,1566.1057 C4473.6938,1550.1723 4478.7888,1529.2686 4481.66,1506.6323 C4487.4025,1461.3598 4484.25,1409.1573 4450.84,1375.9273 C4270.91,1196.9573 3563.1,1344.5873 3309.34,1340.6673 C3257.35,1339.8673 3239.81,1319.4273 3192.34,1340.6673 C3102.68,1380.7973 3076.2429,1505.9113 3068.5029,1563.2313" fill="none" id="phoenix_retrieval-to-phoenix_src" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3067.7,1569.1773,3072.8684,1560.7935,3068.3691,1564.2223,3064.9403,1559.723,3067.7,1569.1773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.8066" x="3193.34" y="1282.4871">Top-K Candidates</text></g><!--link phoenix_scorer to phoenix_ranking--><g class="link" data-entity-1="phoenix_scorer" data-entity-2="phoenix_ranking" data-source-line="212" data-uid="lnk115" id="link_phoenix_scorer_phoenix_ranking"><path d="M3634.3,2334.2273 C3658.2,2308.4373 3698.61,2270.6873 3742.84,2254.4773 C3771.72,2243.8973 5935.34,2227.4673 5956.84,2205.4773 C6057.91,2102.1473 5998.4025,1951.6948 5912.7663,1826.3048 C5869.9481,1763.6098 5820.5978,1707.1804 5781.5214,1666.0398 C5761.9832,1645.4695 5745.0135,1628.7214 5732.713,1616.9233 C5729.6379,1613.9738 5726.8546,1611.3337 5724.3959,1609.0205 C5723.1666,1607.864 5722.0184,1606.7892 5720.9556,1605.7983 C5720.6898,1605.5506 5724.8228,1609.3945 5724.5678,1609.1573" fill="none" id="phoenix_scorer-to-phoenix_ranking" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5720.1744,1605.0709,5724.0402,1614.1294,5723.8355,1608.4763,5729.4887,1608.2717,5720.1744,1605.0709" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.7373" x="5988.13" y="1966.0371">Score Candidates</text></g><!--link user_tower to ann_search--><g class="link" data-entity-1="user_tower" data-entity-2="ann_search" data-source-line="214" data-uid="lnk116" id="link_user_tower_ann_search"><path d="M4306.63,1623.8873 C4288.09,1677.1173 4248.4537,1790.9312 4229.9637,1844.0112" fill="none" id="user_tower-to-ann_search" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4227.99,1849.6773,4234.728,1842.494,4229.6348,1844.9556,4227.1732,1839.8624,4227.99,1849.6773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.9517" x="4277.03" y="1725.0171">User Embedding</text></g><!--link candidate_tower to ann_search--><g class="link" data-entity-1="candidate_tower" data-entity-2="ann_search" data-source-line="215" data-uid="lnk117" id="link_candidate_tower_ann_search"><path d="M4106.29,1623.7173 C4103.64,1650.6473 4102.23,1693.3473 4113.84,1727.9473 C4129.93,1775.8773 4163.0522,1817.4767 4188.5622,1845.1367" fill="none" id="candidate_tower-to-ann_search" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4192.63,1849.5473,4189.4688,1840.2196,4189.2402,1845.8718,4183.588,1845.6433,4192.63,1849.5473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.6968" x="4114.84" y="1725.0171">Candidate Embeddings</text></g><!--link user_emb to gt_user--><g class="link" data-entity-1="user_emb" data-entity-2="gt_user" data-source-line="218" data-uid="lnk118" id="link_user_emb_gt_user"><path d="M4613.17,1615.2573 C4593.54,1643.1173 4562.86,1697.0073 4592.84,1727.9473 C4602.75,1738.1573 4836.29,1729.2373 4848.84,1735.9473 C4898.9,1762.6973 4927.504,1821.2995 4940.074,1852.5995" fill="none" id="user_emb-to-gt_user" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4942.31,1858.1673,4942.6678,1848.3249,4940.4467,1853.5275,4935.2441,1851.3063,4942.31,1858.1673" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.7246" x="4593.84" y="1725.0171">User Embeddings</text></g><!--link hist_post_emb to gt_hist--><g class="link" data-entity-1="hist_post_emb" data-entity-2="gt_hist" data-source-line="219" data-uid="lnk119" id="link_hist_post_emb_gt_hist"><path d="M4999.7,1615.1773 C4998.89,1642.4473 5001.27,1694.9773 5027.84,1727.9473 C5033.34,1734.7573 5038.9,1730.6073 5045.84,1735.9473 C5091.92,1771.3373 5127.5572,1824.0901 5145.3172,1853.1001" fill="none" id="hist_post_emb-to-gt_hist" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5148.45,1858.2173,5147.1623,1848.453,5145.8394,1853.953,5140.3394,1852.63,5148.45,1858.2173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162.7031" x="5028.84" y="1725.0171">History Post Embeddings</text></g><!--link hist_auth_emb to gt_hist--><g class="link" data-entity-1="hist_auth_emb" data-entity-2="gt_hist" data-source-line="220" data-uid="lnk120" id="link_hist_auth_emb_gt_hist"><path d="M4799.57,1615.1573 C4797.01,1643.8973 4796.83,1700.2373 4829.84,1727.9473 C4848.24,1743.3773 5024.37,1725.1873 5045.84,1735.9473 C5098.91,1762.5273 5132.8177,1821.3855 5148.1277,1852.7455" fill="none" id="hist_auth_emb-to-gt_hist" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5150.76,1858.1373,5150.4061,1848.2948,5148.5664,1853.6442,5143.2171,1851.8045,5150.76,1858.1373" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.9785" x="4830.84" y="1725.0171">History Author Embeddings</text></g><!--link cand_post_emb to gt_cand--><g class="link" data-entity-1="cand_post_emb" data-entity-2="gt_cand" data-source-line="221" data-uid="lnk121" id="link_cand_post_emb_gt_cand"><path d="M5432.49,1615.0773 C5435.7,1637.3473 5440.9,1676.8773 5442.84,1710.9473 C5446.02,1766.5273 5420.9496,1823.1248 5405.4896,1852.8348" fill="none" id="cand_post_emb-to-gt_cand" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5402.72,1858.1573,5410.4228,1852.02,5405.028,1853.7219,5403.3261,1848.3271,5402.72,1858.1573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="181.8921" x="5444.09" y="1725.0171">Candidate Post Embeddings</text></g><!--link cand_auth_emb to gt_cand--><g class="link" data-entity-1="cand_auth_emb" data-entity-2="gt_cand" data-source-line="222" data-uid="lnk122" id="link_cand_auth_emb_gt_cand"><path d="M5207.69,1615.3273 C5205.4,1643.2873 5205.46,1697.3073 5234.84,1727.9473 C5245.59,1739.1473 5255.52,1727.9773 5268.84,1735.9473 C5321.25,1767.2473 5360.3847,1822.9964 5379.1647,1853.1064" fill="none" id="cand_auth_emb-to-gt_cand" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5382.34,1858.1973,5380.971,1848.4441,5379.6939,1853.9549,5374.1831,1852.6778,5382.34,1858.1973" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.1675" x="5235.84" y="1725.0171">Candidate Author Embeddings</text></g><!--link gt_user to grok_transformer--><g class="link" data-entity-1="gt_user" data-entity-2="grok_transformer" data-source-line="225" data-uid="lnk123" id="link_gt_user_grok_transformer"><path d="M4970,1895.7573 C4989.29,1911.0173 5019.22,1932.3173 5048.84,1943.9673 C5156.14,1986.1873 5518.31,1974.2873 5528.84,1984.4573 C5559.64,2014.1873 5539.5074,2074.2021 5538.8074,2076.2421" fill="none" id="gt_user-to-grok_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5536.86,2081.9173,5543.5645,2074.7028,5538.4828,2077.188,5535.9976,2072.1063,5536.86,2081.9173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85.0269" x="5186.61" y="1966.0371">User Context</text></g><!--link gt_hist to grok_transformer--><g class="link" data-entity-1="gt_hist" data-entity-2="grok_transformer" data-source-line="226" data-uid="lnk124" id="link_gt_hist_grok_transformer"><path d="M5184.74,1895.7873 C5207,1910.4273 5240.39,1930.8373 5271.84,1943.9673 C5311.34,1960.4673 5322.72,1961.3773 5364.84,1968.9673 C5400.87,1975.4673 5503.12,1958.4173 5528.84,1984.4573 C5558.92,2014.9173 5539.4189,2074.2024 5538.7489,2076.2224" fill="none" id="gt_hist-to-grok_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5536.86,2081.9173,5543.49,2074.6342,5538.4341,2077.1715,5535.8968,2072.1157,5536.86,2081.9173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.8691" x="5365.84" y="1966.0371">Engagement History</text></g><!--link gt_cand to grok_transformer--><g class="link" data-entity-1="gt_cand" data-entity-2="grok_transformer" data-source-line="227" data-uid="lnk125" id="link_gt_cand_grok_transformer"><path d="M5429.98,1895.8473 C5462.17,1913.5173 5506.94,1943.7973 5528.84,1984.4573 C5549.14,2022.1473 5538.4694,2074.2567 5538.0894,2076.0567" fill="none" id="gt_cand-to-grok_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5536.85,2081.9273,5542.6228,2073.9476,5537.8828,2077.0351,5534.7953,2072.2952,5536.85,2081.9273" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.3252" x="5519.97" y="1966.0371">Candidates</text></g><!--link gt_attn to grok_transformer--><g class="link" data-entity-1="gt_attn" data-entity-2="grok_transformer" data-source-line="228" data-uid="lnk126" id="link_gt_attn_grok_transformer"><path d="M4791.67,1904.3873 C4808.17,1918.1573 4829.9,1934.1273 4851.84,1943.9673 C4901.55,1966.2773 4917.73,1962.6373 4971.84,1968.9673 C5002.59,1972.5773 5506.37,1963.1673 5528.84,1984.4573 C5559.92,2013.8973 5539.5336,2074.1977 5538.8236,2076.2477" fill="none" id="gt_attn-to-grok_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="5536.86,2081.9173,5543.5851,2074.722,5538.4963,2077.1926,5536.0257,2072.1038,5536.86,2081.9173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.7095" x="4972.84" y="1966.0371">Attention Mask</text></g><!--link gt_ln to gt_unembed--><g class="link" data-entity-1="gt_ln" data-entity-2="gt_unembed" data-source-line="229" data-uid="lnk127" id="link_gt_ln_gt_unembed"><path d="M4596.76,1895.9573 C4576.24,1913.0973 4551.82,1940.4473 4559.84,1968.9673 C4570.3,2006.1473 4592.9791,2038.5223 4609.9291,2059.5923" fill="none" id="gt_ln-to-gt_unembed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="4613.69,2064.2673,4611.1654,2054.7475,4610.5559,2060.3715,4604.932,2059.762,4613.69,2064.2673" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.4233" x="4560.84" y="1966.0371">Normalized</text></g><!--link gt_unembed to phoenix_scorer--><g class="link" data-entity-1="gt_unembed" data-entity-2="phoenix_scorer" data-source-line="230" data-uid="lnk128" id="link_gt_unembed_phoenix_scorer"><path d="M4569.89,2085.5373 C4423.17,2091.4673 4032.6,2119.7473 3742.84,2254.4773 C3700.93,2273.9673 3665.09,2305.5321 3640.55,2330.1021" fill="none" id="gt_unembed-to-phoenix_scorer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="3636.31,2334.3473,3645.5002,2330.8062,3639.8434,2330.8096,3639.8399,2325.1528,3636.31,2334.3473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="83.7256" x="3853.3354" y="2227.5471">Action Logits</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.7764" x="3833.81" y="2243.3464">[B,C,num_actions]</text></g><!--link cp_traits to cp_executor--><g class="link" data-entity-1="cp_traits" data-entity-2="cp_executor" data-source-line="235" data-uid="lnk129" id="link_cp_traits_cp_executor"><path d="M4972.9043,233.0997 C4972.9814,233.3612 4973.0589,233.6242 4973.1368,233.8886 C4973.4485,234.9462 4973.7669,236.0262 4974.0914,237.1273 C4979.2841,254.7448 4986.0681,277.7623 4992.8513,300.7773 C4999.6344,323.7923 5006.4166,346.8048 5011.6055,364.4123 C5011.9298,365.5128 5012.2479,366.5921 5012.5593,367.6491 C5012.6372,367.9133 5011.0186,362.4208 5011.0956,362.6822" fill="none" id="cp_traits-to-cp_executor" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="5012.7917,368.4375,5014.0845,358.6739,5011.3783,363.6414,5006.4107,360.9353,5012.7917,368.4375" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.0381" x="4987.18" y="278.8071">Implements</text></g><!--link cp_executor to query_hydrators--><g class="link" data-entity-1="cp_executor" data-entity-2="query_hydrators" data-source-line="237" data-uid="lnk130" id="link_cp_executor_query_hydrators"><path d="M5012.7441,416.1453 C5012.6853,416.2637 5012.6262,416.3825 5012.5668,416.5018 C5012.0912,417.4555 5011.5956,418.4334 5011.0799,419.4325 C5009.0173,423.4287 5006.6341,427.7636 5003.9363,432.2448 C4993.145,450.1698 4977.32,470.4373 4956.84,480.7473 C4935.6,491.4373 4552.04,483.4973 4528.84,488.7473 C4292.18,542.3573 4213.56,553.9573 4031.84,714.7773 C3966.11,772.9473 4004.11,838.1173 3928.84,883.2873 C3902.88,898.8573 3818.18,874.7173 3792.84,891.2873 C3757.38,914.4623 3735.5075,956.6173 3722.4375,993.4548 C3719.17,1002.6642 3716.4527,1011.5412 3714.2107,1019.7062 C3713.9305,1020.7269 3713.6576,1021.7364 3713.3921,1022.734 C3713.2593,1023.2328 3714.6494,1017.9247 3714.5203,1018.4175" fill="none" id="cp_executor-to-query_hydrators" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="3712.9993,1024.2215,3719.1501,1016.5295,3714.2668,1019.3848,3711.4115,1014.5015,3712.9993,1024.2215" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="4529.84" y="645.3271">Uses</text></g><!--link cp_executor to sources--><g class="link" data-entity-1="cp_executor" data-entity-2="sources" data-source-line="238" data-uid="lnk131" id="link_cp_executor_sources"><path d="M5012.7784,416.2206 C5012.7198,416.3395 5012.6609,416.4587 5012.6017,416.5783 C5012.1277,417.5353 5011.6336,418.5164 5011.1195,419.5186 C5009.063,423.5275 5006.6856,427.8742 5003.9925,432.3648 C4993.22,450.3273 4977.395,470.5923 4956.84,480.7473 C4943.26,487.4573 2789.95,487.6373 2774.84,488.7473 C2421.76,514.5673 1429.74,447.2673 1197.84,714.7773 C1148.79,771.3673 1153.13,823.2073 1197.84,883.2873 C1645.77,1485.1473 2073.79,1250.7873 2814.84,1367.9273 C2824.67,1369.4773 3165.76,1368.9473 3172.84,1375.9273 C3207.055,1409.6623 3209.5275,1463.3648 3203.2163,1509.2073 C3200.0606,1532.1286 3194.7091,1553.0848 3190.0314,1568.5976 C3189.7391,1569.5672 3189.4493,1570.5155 3189.1629,1571.4416 C3189.0913,1571.6732 3190.8023,1566.1742 3190.7311,1566.4029" fill="none" id="cp_executor-to-sources" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="3188.9488,1572.1321,3195.4417,1564.7266,3190.4341,1567.3578,3187.8029,1562.3501,3188.9488,1572.1321" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="1198.84" y="818.8571">Uses</text></g><!--link cp_executor to hydrators--><g class="link" data-entity-1="cp_executor" data-entity-2="hydrators" data-source-line="239" data-uid="lnk132" id="link_cp_executor_hydrators"><path d="M5012.783,416.2297 C5012.7244,416.3487 5012.6655,416.468 5012.6063,416.5876 C5012.1326,417.545 5011.6387,418.5265 5011.1248,419.5291 C5009.0691,423.5396 5006.6925,427.8879 5004,432.3798 C4993.23,450.3473 4977.405,470.6123 4956.84,480.7473 C4930.52,493.7173 759.06,480.6673 730.84,488.7473 C468.8,563.7573 209.84,539.7173 209.84,812.2873 C209.84,812.2873 209.84,812.2873 209.84,1597.4373 C209.84,1645.3373 194.94,1672.4073 231.84,1702.9473 C313.31,1770.3573 2058.6,1662.6773 2134.84,1735.9473 C2156.96,1757.2023 2159.245,1791.4523 2155.8613,1820.7561 C2155.0153,1828.082 2153.8151,1835.0988 2152.4819,1841.5261 C2152.1486,1843.1329 2151.807,1844.7029 2151.4605,1846.2317 C2151.2873,1846.9961 2152.4897,1841.9103 2152.3144,1842.6535" fill="none" id="cp_executor-to-hydrators" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="2150.9376,1848.4934,2156.8961,1840.6514,2152.085,1843.6268,2149.1096,1838.8157,2150.9376,1848.4934" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="210.84" y="1070.3771">Uses</text></g><!--link cp_executor to pre_filters--><g class="link" data-entity-1="cp_executor" data-entity-2="pre_filters" data-source-line="240" data-uid="lnk133" id="link_cp_executor_pre_filters"><path d="M5012.7728,410.3601 C5012.6489,410.5478 5012.5237,410.7371 5012.3973,410.928 C5012.1445,411.31 5011.8867,411.6985 5011.624,412.0933 C5010.5732,413.6726 5009.4443,415.3532 5008.2435,417.1199 C5005.8419,420.6532 5003.1525,424.5307 5000.225,428.6311 C4988.515,445.0323 4972.995,464.9973 4956.84,480.7473 C4830.68,603.7473 4726.32,562.9873 4636.84,714.7773 C4521.92,909.7173 4726.5,1053.7673 4572.84,1219.8973 C4528.16,1268.2073 4491.62,1233.6773 4427.84,1249.8973 C4240.62,1297.5273 4147.86,1238.7373 4011.84,1375.9273 C3905.2,1483.4973 3997.21,1575.1773 3915.84,1702.9473 C3819.76,1853.8173 3775.51,1892.4373 3613.84,1968.9673 C3544.075,2001.9973 3373.47,2030.0648 3219.2462,2049.9648 C3142.1344,2059.9148 3069.1178,2067.8229 3014.8492,2073.2886 C2987.7149,2076.0214 2965.2676,2078.1436 2949.3389,2079.605 C2945.3567,2079.9704 2941.7819,2080.2945 2938.6432,2080.5765 C2937.0738,2080.7175 2935.6135,2080.848 2934.2657,2080.9678 C2933.5918,2081.0278 2932.946,2081.085 2932.3289,2081.1397 C2932.0203,2081.167 2937.6957,2080.666 2937.4014,2080.692" fill="none" id="cp_executor-to-pre_filters" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="2931.4247,2081.2196,2940.7415,2084.4127,2936.4053,2080.7799,2940.0381,2076.4437,2931.4247,2081.2196" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="4428.84" y="1282.4871">Uses</text></g><!--link cp_executor to scorers--><g class="link" data-entity-1="cp_executor" data-entity-2="scorers" data-source-line="241" data-uid="lnk134" id="link_cp_executor_scorers"><path d="M5012.783,416.2297 C5012.7244,416.3487 5012.6655,416.468 5012.6063,416.5876 C5012.1326,417.545 5011.6387,418.5265 5011.1248,419.5291 C5009.0691,423.5396 5006.6925,427.8879 5004,432.3798 C4993.23,450.3473 4977.405,470.6123 4956.84,480.7473 C4927.34,495.2873 246.78,468.5273 220.84,488.7473 C103.85,579.9473 138.84,663.9473 138.84,812.2873 C138.84,812.2873 138.84,812.2873 138.84,2083.9673 C138.84,2207.4073 2231.45,2243.1273 2354.84,2246.4773 C2385.95,2247.3173 2884.44,2247.8773 2914.84,2254.4773 C2971.32,2266.7273 3030.8275,2292.5998 3076.7,2315.7173 C3099.6363,2327.2761 3119.1638,2338.1461 3133.1997,2346.2801 C3136.7087,2348.3136 3139.8744,2350.1762 3142.6644,2351.8357 C3144.0594,2352.6655 3145.3605,2353.4445 3146.5635,2354.1688 C3147.1651,2354.5309 3147.7421,2354.8793 3148.2941,2355.2136 C3148.4321,2355.2972 3143.4381,2352.2687 3143.573,2352.3505" fill="none" id="cp_executor-to-scorers" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="3148.7034,2355.4616,3143.0819,2347.3747,3144.4281,2352.869,3138.9337,2354.2152,3148.7034,2355.4616" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="139.84" y="1602.0071">Uses</text></g><!--link cp_executor to post_filters--><g class="link" data-entity-1="cp_executor" data-entity-2="post_filters" data-source-line="242" data-uid="lnk135" id="link_cp_executor_post_filters"><path d="M5591.526,617.8811 C5593.4606,617.649 5595.3941,617.4151 5597.3267,617.1797 C5605.0569,616.2381 5612.7707,615.271 5620.4632,614.2864 C5651.2334,610.3481 5681.6642,606.1303 5711.4513,602.1436 C5949.7475,570.2498 6146.84,553.1473 6146.84,812.2873 C6146.84,812.2873 6146.84,812.2873 6146.84,2511.0073 C6146.84,2578.8123 5541.1,2629.9348 4932.9938,2664.1723 C4628.9406,2681.2911 4324.2959,2694.1886 4094.4814,2702.8395 C3979.5741,2707.165 3883.3744,2710.4288 3815.3099,2712.6278 C3781.2777,2713.7273 3754.2793,2714.5606 3735.4931,2715.1273 C3726.1001,2715.4107 3724.7575,2715.4524 3719.6179,2715.6024" fill="none" id="cp_executor-to-post_filters" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="3713.6204,2715.7774,3722.7333,2719.5132,3718.6183,2715.6316,3722.4999,2711.5166,3713.6204,2715.7774" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="6147.84" y="1882.5271">Uses</text></g><!--link cp_executor to selector--><g class="link" data-entity-1="cp_executor" data-entity-2="selector" data-source-line="243" data-uid="lnk136" id="link_cp_executor_selector"><path d="M5012.783,416.2297 C5012.7244,416.3487 5012.6655,416.468 5012.6063,416.5876 C5012.1326,417.545 5011.6387,418.5265 5011.1248,419.5291 C5009.0691,423.5396 5006.6925,427.8879 5004,432.3798 C4993.23,450.3473 4977.405,470.6123 4956.84,480.7473 C4941.8,488.1573 138.92,478.2373 125.84,488.7473 C11,580.9973 53.84,664.9673 53.84,812.2873 C53.84,812.2873 53.84,812.2873 53.84,2362.4873 C53.84,2521.5773 2756.97,2463.3673 2914.84,2482.9873 C2927.6,2484.5773 2935.0932,2485.6691 2948.1832,2488.1291" fill="none" id="cp_executor-to-selector" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="2954.08,2489.2373,2945.9736,2483.6439,2949.166,2488.3138,2944.4961,2491.5062,2954.08,2489.2373" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="54.84" y="1725.0171">Uses</text></g><!--link cp_executor to side_effects--><g class="link" data-entity-1="cp_executor" data-entity-2="side_effects" data-source-line="244" data-uid="lnk137" id="link_cp_executor_side_effects"><path d="M5012.7784,416.2206 C5012.7198,416.3395 5012.6609,416.4587 5012.6017,416.5783 C5012.1277,417.5353 5011.6336,418.5164 5011.1195,419.5186 C5009.063,423.5275 5006.6856,427.8742 5003.9925,432.3648 C4993.22,450.3273 4977.395,470.5923 4956.84,480.7473 C4930.9,493.5573 2896.84,471.1973 2873.84,488.7473 C2814.97,533.6573 2792.36,613.6323 2784.5225,682.8286 C2783.5428,691.4781 2782.7939,699.9592 2782.2339,708.1824 C2781.9539,712.2939 2781.7211,716.341 2781.5303,720.3124 C2781.4349,722.2981 2781.35,724.2649 2781.2749,726.2114 C2781.2373,727.1846 2781.2023,728.1528 2781.1695,729.1157 C2781.1532,729.5971 2781.3275,724.0803 2781.3123,724.5591" fill="none" id="cp_executor-to-side_effects" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#000000" points="2781.1223,730.556,2785.4054,721.6873,2781.2807,725.5586,2777.4094,721.4339,2781.1223,730.556" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="30.8052" x="2874.84" y="645.3271">Uses</text></g><!--link cp_executor to GMN138--><g class="link" data-entity-1="cp_executor" data-entity-2="GMN138" data-source-line="247" data-uid="lnk140" id="link_cp_executor_GMN138"><path d="M5017.0838,305.1372 C5017.1876,304.6996 5017.294,304.2631 5017.4031,303.8279 C5018.2759,300.346 5019.3216,296.9421 5020.5631,293.6545 C5025.5294,280.5042 5033.63,269.2148 5046.34,262.2373 C5096.8,234.5373 5509.19,245.7873 5564.34,262.2373 C5600,272.8673 5635.22,291.8773 5666.16,312.3173" fill="none" id="cp_executor-GMN138" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link GMN141 to phoenix_ranking--><g class="link" data-entity-1="GMN141" data-entity-2="phoenix_ranking" data-source-line="263" data-uid="lnk143" id="link_GMN141_phoenix_ranking"><path d="M5830.2,1220.0673 C5805.935,1297.0173 5776.885,1389.1523 5753.6375,1462.8836 C5742.0138,1499.7492 5731.8406,1532.0139 5724.4416,1555.479 C5723.5167,1558.4122 5722.6351,1561.2078 5721.7995,1563.8578 C5721.3817,1565.1828 5720.9754,1566.4713 5720.5809,1567.7224 C5720.3836,1568.348 5720.1893,1568.9642 5719.998,1569.5709" fill="none" id="GMN141-phoenix_ranking" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link thunder to GMN144--><g class="link" data-entity-1="thunder" data-entity-2="GMN144" data-source-line="285" data-uid="lnk146" id="link_thunder_GMN144"><path d="M596.7927,1399.3806 C596.233,1399.811 595.6735,1400.2423 595.1143,1400.6744 C592.8773,1402.4029 590.644,1404.1449 588.4152,1405.8991 C583.9576,1409.4075 579.5181,1412.9645 575.1033,1416.5596 C557.4441,1430.9401 540.1806,1445.9292 523.7413,1460.8436 C490.8625,1490.6723 461.28,1520.2023 438.42,1543.9673" fill="none" id="thunder-GMN144" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link GMN147 to pre_filters--><g class="link" data-entity-1="GMN147" data-entity-2="pre_filters" data-source-line="294" data-uid="lnk149" id="link_GMN147_pre_filters"><path d="M5767.13,2038.5373 C5703.23,2011.0773 5616.13,1978.4473 5535.34,1964.2173 C5324.59,1927.0773 4786.2,1956.5273 4572.34,1964.2173 C4210.815,1977.2123 3805.5775,2006.1823 3487.2363,2032.2536 C3328.0656,2045.2892 3190.6191,2057.6001 3091.2227,2066.8271 C3041.5245,2071.4407 3001.3388,2075.2832 2972.7064,2078.0599 C2958.3902,2079.4482 2946.9624,2080.5701 2938.678,2081.3886 C2936.6068,2081.5932 2934.7322,2081.7789 2933.058,2081.945 C2932.6395,2081.9866 2932.2334,2082.0269 2931.84,2082.066" fill="none" id="GMN147-pre_filters" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link scorers to GMN150--><g class="link" data-entity-1="scorers" data-entity-2="GMN150" data-source-line="307" data-uid="lnk152" id="link_scorers_GMN150"><path d="M3153.5795,2270.0326 C3154.4505,2266.6344 3155.4927,2263.3179 3156.7291,2260.1214 C3161.6744,2247.3354 3169.725,2236.4698 3182.34,2229.9773 C3235.4,2202.6773 3662.17,2212.8973 3719.34,2229.9773 C3775.98,2246.8973 3831.48,2285.5073 3869.67,2316.5473" fill="none" id="scorers-GMN150" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><g class="legend" data-source-line="314"><rect fill="none" height="214.1758" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="234.2188" x="5933.4264" y="2811.0473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="200.8604" x="5938.4264" y="2830.1225">X For You Feed Algorithm</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="200.6826" x="5938.4264" y="2847.1371">Open sourced by xAI (2026)</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="5938.4264" y="2864.1518">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="182.417" x="5938.4264" y="2881.1664">Architecture Highlights</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="218.5723" x="5938.4264" y="2898.1811">&#8226; No hand-engineered features</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="224.2188" x="5938.4264" y="2915.1957">&#8226; Candidate Isolation in ranking</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="185.5889" x="5938.4264" y="2932.2104">&#8226; Hash-based embeddings</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="169.7227" x="5938.4264" y="2949.225">&#8226; Multi-action prediction</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="157.7051" x="5938.4264" y="2966.2397">&#8226; Composable pipeline</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="5938.4264" y="2983.2543">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58.8164" x="5938.4264" y="3000.269">License</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="135.6934" x="5938.4264" y="3017.2836">Apache License 2.0</text></g><!--SRC=[lLhTSkEs5RxdKw3EJ6jFLdQosqqJJR8pMakAtRLbrtAscydkQ2WIab1J14sG_aadCxtg0_Icz-sZzBuFaIVfEGS02PAWVMFNcSdQm7SEW8FpJ_ocsF0jPraIYZHGLoBDmZpSicKONQrpMQRneKnapZwRJl0_1n79RIPJdXRpuZxXBETH4QRhX0T18GeO-C2cGFUZBDcKyvYDahNCHR7PiW4x1DA45voDycWZ2g0iSw3x7VlkAN-0t-J3vUHYDZfXyn_dbvFJ-PClaO6OmZLdEvExWkTfcB3vlIhuLksmlmOCVkAm29UX0iIxS7KLsc7y-UbSge9DRa24wcEwItyTvZmi-C6OetZsFh5GiIka8w9VMXn_K3ndSna9MFRxFCms3UvJcIJoLgHhTY9KyJ5zcyZeYiS7fsN1O-AiY7InHbBl0eSoBM1tR5x8d7UtVigB4C4Vqr5PRE2oZzEL_9YUybY4R9A26WYkQAL8CreePEGi5KOme0-oWxWIVg69A95bp7Q-J-GI3dSeywn46PsA914oLKok66v1xH7Pcc2BY631By-XIKTdfnDsUlnXSi5EHZ_2_tSlIbNiFPz27KcmobDn1rUibzfXdqrUJLzEn-OUAllJM8BEUNx3Sn3K-kBySCZc814Uaw1mHaHSoskBs8KYi7EhcSmBaRAT2tvTSbKGDEVN2t0CBaIM1M8KhAwu0Qbi0SFcPkcVtx4_bJo_PqVtSHx2BQlsfblJnEWQnnORE-RipI54RHb51UZ1d5yJ5yi43Zv9ro2-BGAF1AhRlJvo6QhhJH-tAHWTU23LPjOq8SDeTRrfddCkoppYdVCTXcaim3ou1UnecwFV_IUxt82_XLia3An_d0vclBYL-PMhxOL6BLGU-PYSRoHFnLt5vAmi1dBbOvHfPCMeEb7ldTLdQjxR8pS6zil7u2WgSaV6v4ak-LtnWf7Zq5kBucZXlQxlnSzR6PVHbSF2yJx67uYV_TJlHSpbk0H2q1xBWKXkOZ_5l5ogA1TPXq2LovurfhvZlXTAB4KYYdis5Gd42j0glTcRrQAbK1gWsEvvpWTemuXjNuKpPmdqfUPyiJ8Cl9SnpcKsBhD4HB13fKc9CYwpnSf7CLfp1mRcvOVDURAwlEMySC0Anlpe2z17m8vvRFO20dO8yy9FTfpoHAp5Ck7kpRWhmhruAK5WDqAMAhcVSvwI6JGsojF7wS1XnbrA7FNJKgnzn-_1ycA7P8l3FR8cNTP1dGApkvAErwkM-q4dtpLLCwm9zUz-VR3-WZ0OOqyO73aMv67Rde90FYv_vcAzWLDLR237MueKKZoNpwr1FS182s0i83Gfi9QAtwY03A94rtF1CqoIOiqo5ZSFS3ixcrKScevGKqkPkjIrK241YtmUy59cxuYZHG3ZEGH5zbj3mm31tkrPxITCrx11XmOQ3yBfsdPZkcdUCFMmVR-VQZniJAUHyS4y2xS7xuLCU6fJW9iUioHxXBmFnT-sISZYRZhQ1nwLJLOhs6fN1PqvBGyOM70zq1CfmcZ3JVw1_XnPQ0vw1pWDYOlPmxDaUfT7Fyp6LO87rGf5uIra4XGxTJByV7cVoG7gf6ywdRwQVD5D-YmGjdUgjsVIz3f5S6ICgH3nF-VvG1SEY5PkLj-sdHmSBPGqvF0QcGT4dNKV5LXd0cd_0VpReSlpFYeApDs5Rd2ueld5gHmSMYgiA4FZgT5KgfaMYHbo2nSAKBhciXGVKy_W-vUVkepKS-hT-T7PP7Ry0Pp3FNZ0zE2Fem-eVU2E3-rPdq_hJ11eB8wwzshoUlgwgtiM3a4y5_mcJC3PNDxAmQMy1N6VofWdpS2HMs1_Ii-861ZH7v_Rz9tz-lT_iCbsoUEuIfcmJ5mK2FVx49kaMevajnu-aKNsCnlDPk3OmppQe3-L1SH6J3_13OYjIC8SGfJc5QOGIGZeEaYVpCBq2dQ04il3LAralksHcGRwZFWeL9l1MwZHu_f83vaoYjG5MXdoxRAFn8WVHTUYtC3CWkBGu-GwcliOX33p48Fg5Zqxm7jxT0SL0-yUY4Ld3-RMsZL7Bg-OSrcOtLGwTgnaGe7Ib1w0NHJEnJvu9_NjiP_UllZonVYJPb8igav8lsoTgqVgkKED4dvKBYtwGuSUfTD7JuaOvIMdeRfoPQ6O867Or0mOXKMHzZ4w2Uz10ZCGaqKdlTWVKcutMqb83tMYmxCuvyFHR7my7brEsFdn-UJaU3QfyuDf7cuvffJFvvxhEpiN6HH0a5VNJQ6lfwydttXyj4M2vWeJLwCCTLCqiY-HGdwt2YDOHlSC22aMkbFXWpNgO56rQtnG9tiK9ctrBamfk5sucSsxC9DFMw1DhttGPk88u3htzE4RhHz3qkn6zRbr8-R97OzAImjovkPlVy1pbWDBmX0Lvc6Is100zFvkbRwXAIye7dM8b3UdVt0Txp9LYmAh6yp6mU33ciPV_kjcX9z2zJGCT8LJeNZYhL31qrVO1m-JgSsZ31uvM-QNOQrFs8SUgViqgW_thFN8uTbiDZcyF8PA5fnDzPsXaAnk4J_viXX-s63mnlH_sP1XHvcPoimaQSVZlS2sVWbCL4FAS20pmSy-cELWFMpQZa7GIgY9ZCQ03ifELSAHT2RUWXBIrZL3g7hMi17DDWZSBnbw9wlh3Q38K5YpZHi4ZQyH1ATsOuLlVDpmeAczMA6TxcCGDBv44BYR0GzDGca-Qpo_pbIHO0fYUFBLZ8RWMTlj-o7xSh_n6G3CBmZQAAIqRV4XUxblv5gd5NY_UXgXBljN-wpTagObcipTbkYG_NwVTNkdGU22Q4UcPpPah_TrZwsv8pDDK1E70FlLVgCD13WxHnjncpT3zeTzvktqm6PS82tXTaw6xElzPkCbQCnhkpLsEMJVx6ETLkOfinzjdb_bJ7FYoTTnldsq789MclgBoKVTuhKKBfgemGhBvM2B7nGL1ni7LtKYvLMP_H_iKRk4fqyNw-yvlQv7Y-diR6PSPnVZKcf1WIeFtZMqlzaFRYvcgjQXnsZgkfr8wf8PqCroA6YLvbsyhup1gwFIU4cbCQydRBMh_RSkhpgBgg1Hsbei3WBMLbtwgtsBnbQIFJGcHZXKZHBMKk5WusZjjHfLQozLTpLiQperwGhZW9K2SMbNhKOqz03WhWZiYNgmtO-kWTrN3uMZ5QPAx4Csoys0giJg5dK922Yi8iD4_0pre3FUK6MjgaFpGOAToBN0N8ugtxJSBaBzeUBJyzk_fvfxlXgoBldszzyq2XD8el0PpfQIhS2TGMGtbeD6g0wi3jpUwKVfcx7PlqGLYVqSca7LpwAEqFxvPdWbJ91AkA4SFrZXSnE71BBzRvTlghlJbH_gr5aEqUNRW-KRGDZCfyfAM5skm3IaEKujrvo3hAQ72dANgdnXRlK2SoPDySnKIGdcHioc7TsAghdMrorOxyBVw6J4v2BC54S11-j74Jw7FStEBYTF_vYBBho0l0skknNEp9MR5kxfYUxNibri3UfeiqVthd5LMvpLNN6Q7yByht_x5wlxtKFTY5sP5oZiSyOhPqe-rxR0gs1cMBIwt4Dj1wPOyLBKhUmXYoN4ETt9NgYgaxsBUtbHjyMnODC7Ca7TRLat3kJfXmuTFjW_WpjZ8Jhp66jN7eBMos93ZHxaS5ecXHWOvrn_W1vIQGqvq-uglC47X7pl1VoHyoovjx_1mUdNwn8kSAyYY18HNT44d1GS15_K8_HXQN4Z-6sDXoil91Xv1jicaDg4kLuklkL9KYDNL51I89Ov0K1r5jHDWg8KTA52Bl7HdGl4J__ktxZzlB1ozlRrNJcJbC1fimqWsQfCTT1YS2KiqUch1c948yr285VVlNn1Go2_RMj8RwOQTEoMx64fYq9kqIHCzgntQhy-3bZhaPB-hcYD0RUYlyznAkgPeBgTd0tU6ulqWyTOFtWq5FYDad8JaGws-jicLT_AQZ9uuIqeMSJ0pl2jAWeCM48IQtA533oLZ0sybUWRGIbsA-3aK2ADtxADADe7J_YA7ByJeOmNwBwyCJuV5yFdDQn-NsDtlEO6otOBAPbCOdjOV3Op8CbDRNyKXytx6DPu86FcwaSmp7q5OwLNFLXX-DB59FgUENotqfYbvohCl5UnWurteoQtL6rXLM5ILQzHG59MIZPKrg6nyUXaY0urgz-SwF3OV54oPF_zzwv-FiB-yqym79skxPbuwNqrCjJ-XXwDvERHY0wYrRCGWCH_AK7sKZyEIRKcEyTB-1h_e0FgK_KzR3QdEyj0vZejYjdodjsDZjdkoozUVcMDt7tq3FdoUfCWRrU7PXBiEuq740f0Qk1KOcO3HB-_1MDXTRH2aByKSjsj5g8ZUyiU6vygH0NBpDsPpP-8YAVAtkGemmSPp0p2hNs1ajCY2_u7]--></g></svg>