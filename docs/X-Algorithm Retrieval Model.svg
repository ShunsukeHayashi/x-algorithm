<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="2543px" preserveAspectRatio="none" style="width:2206px;height:2543px;background:#FEFEFE;" version="1.1" viewBox="0 0 2206 2543" width="2206px" zoomAndPan="magnify"><title>Phoenix Retrieval - Two-Tower Model Architecture</title><defs/><g><rect fill="#FEFEFE" height="2543" style="stroke:none;stroke-width:1;" width="2206" x="0" y="0"/><g class="title" data-source-line="4"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="624.8301" x="786.451" y="37.1182">Phoenix Retrieval - Two-Tower Model Architecture</text></g><!--cluster Input Features--><g class="cluster" data-entity="Input Features" data-source-line="6" data-uid="ent0002" id="cluster_Input Features"><path d="M457.91,58.7373 L576.119,58.7373 A3.75,3.75 0 0 1 578.619,61.2373 L585.619,81.752 L1489.91,81.752 A2.5,2.5 0 0 1 1492.41,84.252 L1492.41,213.2473 A2.5,2.5 0 0 1 1489.91,215.7473 L457.91,215.7473 A2.5,2.5 0 0 1 455.41,213.2473 L455.41,61.2373 A2.5,2.5 0 0 1 457.91,58.7373" fill="#BBDEFB" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="455.41" x2="585.619" y1="81.752" y2="81.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117.209" x="459.41" y="74.8125">Input Features</text></g><!--cluster user_feat--><g class="cluster" data-entity="user_feat" data-source-line="7" data-uid="ent0003" id="cluster_user_feat"><rect fill="#FFFFFF" height="89.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="458" x="479.41" y="102.7373"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109.3818" x="653.7191" y="118.8125">User Features</text></g><!--cluster cand_feat--><g class="cluster" data-entity="cand_feat" data-source-line="13" data-uid="ent0007" id="cluster_cand_feat"><rect fill="#FFFFFF" height="89.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="507" x="961.41" y="102.7373"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="152.2979" x="1138.7611" y="118.8125">Candidate Features</text></g><!--cluster User Tower--><g class="cluster" data-entity="User Tower" data-source-line="21" data-uid="ent0012" id="cluster_User Tower"><path d="M39.91,264.7473 L130.7479,264.7473 A3.75,3.75 0 0 1 133.2479,267.2473 L140.2479,287.762 L831.91,287.762 A2.5,2.5 0 0 1 834.41,290.262 L834.41,1340.1373 A2.5,2.5 0 0 1 831.91,1342.6373 L39.91,1342.6373 A2.5,2.5 0 0 1 37.41,1340.1373 L37.41,267.2473 A2.5,2.5 0 0 1 39.91,264.7473" fill="#C8E6C9" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="37.41" x2="140.2479" y1="287.762" y2="287.762"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="89.8379" x="41.41" y="280.8225">User Tower</text></g><!--cluster user_hash--><g class="cluster" data-entity="user_hash" data-source-line="22" data-uid="ent0013" id="cluster_user_hash"><rect fill="#FFFFFF" height="89.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="335" x="475.41" y="308.7473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="161.1982" x="562.3109" y="324.8225">User Hash Functions</text></g><!--cluster Candidate Tower--><g class="cluster" data-entity="Candidate Tower" data-source-line="43" data-uid="ent0027" id="cluster_Candidate Tower"><path d="M1138.91,264.7473 L1272.6639,264.7473 A3.75,3.75 0 0 1 1275.1639,267.2473 L1282.1639,287.762 L1594.91,287.762 A2.5,2.5 0 0 1 1597.41,290.262 L1597.41,1340.1373 A2.5,2.5 0 0 1 1594.91,1342.6373 L1138.91,1342.6373 A2.5,2.5 0 0 1 1136.41,1340.1373 L1136.41,267.2473 A2.5,2.5 0 0 1 1138.91,264.7473" fill="#FFCCBC" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1136.41" x2="1282.1639" y1="287.762" y2="287.762"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132.7539" x="1140.41" y="280.8225">Candidate Tower</text></g><!--cluster cand_hash--><g class="cluster" data-entity="cand_hash" data-source-line="44" data-uid="ent0028" id="cluster_cand_hash"><rect fill="#FFFFFF" height="89.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="335" x="1160.41" y="308.7473"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="204.1143" x="1225.8529" y="324.8225">Candidate Hash Functions</text></g><!--cluster ANN Index (Pre-computed)--><g class="cluster" data-entity="ANN Index .Pre-computed." data-source-line="63" data-uid="ent0040" id="cluster_ANN Index .Pre-computed."><path d="M812.91,1426.8173 L1030.4657,1426.8173 A3.75,3.75 0 0 1 1032.9657,1429.3173 L1039.9657,1449.832 L1097.91,1449.832 A2.5,2.5 0 0 1 1100.41,1452.332 L1100.41,1804.0473 A2.5,2.5 0 0 1 1097.91,1806.5473 L812.91,1806.5473 A2.5,2.5 0 0 1 810.41,1804.0473 L810.41,1429.3173 A2.5,2.5 0 0 1 812.91,1426.8173" fill="#FFF59D" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="810.41" x2="1039.9657" y1="1449.832" y2="1449.832"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="216.5557" x="814.41" y="1442.8925">ANN Index (Pre-computed)</text></g><!--cluster Retrieval Output--><g class="cluster" data-entity="Retrieval Output" data-source-line="68" data-uid="ent0043" id="cluster_Retrieval Output"><path d="M702.91,1961.0273 L833.9911,1961.0273 A3.75,3.75 0 0 1 836.4911,1963.5273 L843.4911,1984.042 L1201.91,1984.042 A2.5,2.5 0 0 1 1204.41,1986.542 L1204.41,2047.5373 A2.5,2.5 0 0 1 1201.91,2050.0373 L702.91,2050.0373 A2.5,2.5 0 0 1 700.41,2047.5373 L700.41,1963.5273 A2.5,2.5 0 0 1 702.91,1961.0273" fill="#E1BEE7" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="700.41" x2="843.4911" y1="1984.042" y2="1984.042"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130.0811" x="704.41" y="1977.1025">Retrieval Output</text></g><!--entity uid--><g class="entity" data-entity="uid" data-source-line="8" data-uid="ent0004" id="entity_uid"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="73.457" x="698.68" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53.457" x="708.68" y="162.8125">User ID</text></g><!--entity following--><g class="entity" data-entity="following" data-source-line="9" data-uid="ent0005" id="entity_following"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="114.9717" x="806.92" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.9717" x="816.92" y="162.8125">Following List</text></g><!--entity engagements--><g class="entity" data-entity="engagements" data-source-line="10" data-uid="ent0006" id="entity_engagements"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="168.5381" x="495.14" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="148.5381" x="505.14" y="162.8125">Recent Engagements</text></g><!--entity pid--><g class="entity" data-entity="pid" data-source-line="14" data-uid="ent0008" id="entity_pid"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="71.3516" x="1245.73" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="51.3516" x="1255.73" y="162.8125">Post ID</text></g><!--entity content--><g class="entity" data-entity="content" data-source-line="15" data-uid="ent0009" id="entity_content"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="110.0361" x="977.39" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.0361" x="987.39" y="162.8125">Post Content</text></g><!--entity aid--><g class="entity" data-entity="aid" data-source-line="16" data-uid="ent0010" id="entity_aid"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="88.8789" x="1121.97" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="68.8789" x="1131.97" y="162.8125">Author ID</text></g><!--entity media--><g class="entity" data-entity="media" data-source-line="17" data-uid="ent0011" id="entity_media"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.0078" x="1352.41" y="138.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.0078" x="1362.41" y="162.8125">Media Type</text></g><!--entity user_emb_table--><g class="entity" data-entity="user_emb_table" data-source-line="27" data-uid="ent0016" id="entity_user_emb_table"><path d="M634.39,470.7573 C634.39,460.7573 723.41,460.7573 723.41,460.7573 C723.41,460.7573 812.43,460.7573 812.43,470.7573 L812.43,496.772 C812.43,506.772 723.41,506.772 723.41,506.772 C723.41,506.772 634.39,506.772 634.39,496.772 L634.39,470.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M634.39,470.7573 C634.39,480.7573 723.41,480.7573 723.41,480.7573 C723.41,480.7573 812.43,480.7573 812.43,470.7573" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="158.04" x="644.39" y="498.8325">User Embedding Table</text></g><!--entity hist_post_emb_table--><g class="entity" data-entity="hist_post_emb_table" data-source-line="28" data-uid="ent0017" id="entity_hist_post_emb_table"><path d="M369.02,470.7573 C369.02,460.7573 484.4131,460.7573 484.4131,460.7573 C484.4131,460.7573 599.8061,460.7573 599.8061,470.7573 L599.8061,496.772 C599.8061,506.772 484.4131,506.772 484.4131,506.772 C484.4131,506.772 369.02,506.772 369.02,496.772 L369.02,470.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M369.02,470.7573 C369.02,480.7573 484.4131,480.7573 484.4131,480.7573 C484.4131,480.7573 599.8061,480.7573 599.8061,470.7573" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="210.7861" x="379.02" y="498.8325">History Post Embedding Table</text></g><!--entity hist_auth_emb_table--><g class="entity" data-entity="hist_auth_emb_table" data-source-line="29" data-uid="ent0018" id="entity_hist_auth_emb_table"><path d="M85.25,470.7573 C85.25,460.7573 209.4067,460.7573 209.4067,460.7573 C209.4067,460.7573 333.5635,460.7573 333.5635,470.7573 L333.5635,496.772 C333.5635,506.772 209.4067,506.772 209.4067,506.772 C209.4067,506.772 85.25,506.772 85.25,496.772 L85.25,470.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M85.25,470.7573 C85.25,480.7573 209.4067,480.7573 209.4067,480.7573 C209.4067,480.7573 333.5635,480.7573 333.5635,470.7573" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="228.3135" x="95.25" y="498.8325">History Author Embedding Table</text></g><!--entity user_lookup--><g class="entity" data-entity="user_lookup" data-source-line="31" data-uid="ent0019" id="entity_user_lookup"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="190.7549" x="628.03" y="583.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="170.7549" x="638.03" y="607.8525">User Embedding Lookup</text></g><!--entity hist_post_lookup--><g class="entity" data-entity="hist_post_lookup" data-source-line="32" data-uid="ent0020" id="entity_hist_post_lookup"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="243.501" x="349.66" y="583.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="223.501" x="359.66" y="607.8525">History Post Embedding Lookup</text></g><!--entity hist_auth_lookup--><g class="entity" data-entity="hist_auth_lookup" data-source-line="33" data-uid="ent0021" id="entity_hist_auth_lookup"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="261.0283" x="53.9" y="583.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="241.0283" x="63.9" y="607.8525">History Author Embedding Lookup</text></g><!--entity agg_user--><g class="entity" data-entity="agg_user" data-source-line="35" data-uid="ent0022" id="entity_agg_user"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="182.9346" x="631.94" y="739.3773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.9346" x="641.94" y="763.4525">Aggregate Embeddings</text></g><!--entity user_transformer--><g class="entity" data-entity="user_transformer" data-source-line="36" data-uid="ent0023" id="entity_user_transformer"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="143.2656" x="662.78" y="894.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="123.2656" x="672.78" y="919.0625">User Transformer</text></g><!--entity user_ln--><g class="entity" data-entity="user_ln" data-source-line="37" data-uid="ent0024" id="entity_user_ln"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.2842" x="692.27" y="992.9973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82.2842" x="702.27" y="1017.0725">Layer Norm</text></g><!--entity user_norm--><g class="entity" data-entity="user_norm" data-source-line="38" data-uid="ent0025" id="entity_user_norm"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="111.9639" x="690.43" y="1132.8073"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91.9639" x="700.43" y="1156.8825">L2 Normalize</text></g><!--entity user_embedding--><g class="entity" data-entity="user_embedding" data-source-line="40" data-uid="ent0026" id="entity_user_embedding"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="135.1787" x="682.82" y="1272.6073"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1787" x="692.82" y="1296.6825">User Embedding</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.9824" x="692.82" y="1313.6971">[D-dimensional]</text></g><!--entity uh1--><g class="entity" data-entity="uh1" data-source-line="23" data-uid="ent0014" id="entity_uh1"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="133.5996" x="660.61" y="344.7473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.5996" x="670.61" y="368.8225">Hash Function 1</text></g><!--entity uh2--><g class="entity" data-entity="uh2" data-source-line="24" data-uid="ent0015" id="entity_uh2"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="133.5996" x="491.61" y="344.7473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.5996" x="501.61" y="368.8225">Hash Function 2</text></g><!--entity post_emb_table--><g class="entity" data-entity="post_emb_table" data-source-line="49" data-uid="ent0031" id="entity_post_emb_table"><path d="M1161.44,470.7573 C1161.44,460.7573 1249.4073,460.7573 1249.4073,460.7573 C1249.4073,460.7573 1337.3746,460.7573 1337.3746,470.7573 L1337.3746,496.772 C1337.3746,506.772 1249.4073,506.772 1249.4073,506.772 C1249.4073,506.772 1161.44,506.772 1161.44,496.772 L1161.44,470.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1161.44,470.7573 C1161.44,480.7573 1249.4073,480.7573 1249.4073,480.7573 C1249.4073,480.7573 1337.3746,480.7573 1337.3746,470.7573" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.9346" x="1171.44" y="498.8325">Post Embedding Table</text></g><!--entity auth_emb_table--><g class="entity" data-entity="auth_emb_table" data-source-line="50" data-uid="ent0032" id="entity_auth_emb_table"><path d="M1381.68,470.7573 C1381.68,460.7573 1478.411,460.7573 1478.411,460.7573 C1478.411,460.7573 1575.1419,460.7573 1575.1419,470.7573 L1575.1419,496.772 C1575.1419,506.772 1478.411,506.772 1478.411,506.772 C1478.411,506.772 1381.68,506.772 1381.68,496.772 L1381.68,470.7573" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1381.68,470.7573 C1381.68,480.7573 1478.411,480.7573 1478.411,480.7573 C1478.411,480.7573 1575.1419,480.7573 1575.1419,470.7573" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="173.4619" x="1391.68" y="498.8325">Author Embedding Table</text></g><!--entity post_lookup--><g class="entity" data-entity="post_lookup" data-source-line="52" data-uid="ent0033" id="entity_post_lookup"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="188.6494" x="1152.09" y="583.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="168.6494" x="1162.09" y="607.8525">Post Embedding Lookup</text></g><!--entity auth_lookup--><g class="entity" data-entity="auth_lookup" data-source-line="53" data-uid="ent0034" id="entity_auth_lookup"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="206.1768" x="1375.32" y="583.7773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="186.1768" x="1385.32" y="607.8525">Author Embedding Lookup</text></g><!--entity agg_cand--><g class="entity" data-entity="agg_cand" data-source-line="55" data-uid="ent0035" id="entity_agg_cand"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="182.9346" x="1314.94" y="739.3773"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.9346" x="1324.94" y="763.4525">Aggregate Embeddings</text></g><!--entity cand_transformer--><g class="entity" data-entity="cand_transformer" data-source-line="56" data-uid="ent0036" id="entity_cand_transformer"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="182.0049" x="1213.41" y="894.9873"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.0049" x="1223.41" y="919.0625">Candidate Transformer</text></g><!--entity cand_ln--><g class="entity" data-entity="cand_ln" data-source-line="57" data-uid="ent0037" id="entity_cand_ln"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.2842" x="1250.27" y="992.9973"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82.2842" x="1260.27" y="1017.0725">Layer Norm</text></g><!--entity cand_norm--><g class="entity" data-entity="cand_norm" data-source-line="58" data-uid="ent0038" id="entity_cand_norm"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="111.9639" x="1211.43" y="1132.8073"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91.9639" x="1221.43" y="1156.8825">L2 Normalize</text></g><!--entity cand_embedding--><g class="entity" data-entity="cand_embedding" data-source-line="60" data-uid="ent0039" id="entity_cand_embedding"><rect fill="#FFFFFF" height="54.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="173.918" x="1160.45" y="1272.6073"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="153.918" x="1170.45" y="1296.6825">Candidate Embedding</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.9824" x="1170.45" y="1313.6971">[D-dimensional]</text></g><!--entity ch1--><g class="entity" data-entity="ch1" data-source-line="45" data-uid="ent0029" id="entity_ch1"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="133.5996" x="1176.61" y="344.7473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.5996" x="1186.61" y="368.8225">Hash Function 1</text></g><!--entity ch2--><g class="entity" data-entity="ch2" data-source-line="46" data-uid="ent0030" id="entity_ch2"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="133.5996" x="1345.61" y="344.7473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113.5996" x="1355.61" y="368.8225">Hash Function 2</text></g><!--entity ann_index--><g class="entity" data-entity="ann_index" data-source-line="64" data-uid="ent0041" id="entity_ann_index"><rect fill="#FFFFFF" height="54.0293" rx="35" ry="35" style="stroke:#000000;stroke-width:1;" width="181.2119" x="901.8" y="1462.8173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="161.2119" x="911.8" y="1486.8925">Candidate Embeddings</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55.2754" x="911.8" y="1503.9071">[N &#215; D]</text></g><!--entity ann_search--><g class="entity" data-entity="ann_search" data-source-line="65" data-uid="ent0042" id="entity_ann_search"><rect fill="#FFFFFF" height="64.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="257.1162" x="826.85" y="1726.5173"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1063.9662" y="1731.5173"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1061.9662" y="1733.5173"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1061.9662" y="1737.5173"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="217.1162" x="841.85" y="1760.5925">Approximate Nearest Neighbor</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.1279" x="841.85" y="1777.6071">(HNSW/FAISS)</text></g><!--entity topk--><g class="entity" data-entity="topk" data-source-line="69" data-uid="ent0044" id="entity_topk"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.7148" x="716.05" y="1997.0273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.7148" x="726.05" y="2021.1025">Top-K Candidates</text></g><!--entity cand_ids--><g class="entity" data-entity="cand_ids" data-source-line="70" data-uid="ent0045" id="entity_cand_ids"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="119.4902" x="895.66" y="1997.0273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99.4902" x="905.66" y="2021.1025">Candidate IDs</text></g><!--entity sim_scores--><g class="entity" data-entity="sim_scores" data-source-line="71" data-uid="ent0046" id="entity_sim_scores"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="138.6309" x="1050.09" y="1997.0273"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.6309" x="1060.09" y="2021.1025">Similarity Scores</text></g><g class="entity" data-entity="GMN88" data-source-line="132" data-uid="ent0089" id="entity_GMN88"><path d="M850.83,1091.0173 L850.83,1211.6125 A0,0 0 0 0 850.83,1211.6125 L885.49,1211.6125 L792.8,1272.2273 L893.49,1211.6125 L1119.998,1211.6125 A0,0 0 0 0 1119.998,1211.6125 L1119.998,1101.0173 L1109.998,1091.0173 L850.83,1091.0173 A0,0 0 0 0 850.83,1091.0173" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1109.998,1091.0173 L1109.998,1101.0173 L1119.998,1101.0173 L1109.998,1091.0173" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.3726" x="856.83" y="1109.0871">User Tower Output</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="856.83" y="1124.8864">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217.3691" x="856.83" y="1140.6858">Normalized D-dimensional vector</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246.1812" x="856.83" y="1156.4851">representing user interests based on:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.6826" x="856.83" y="1172.2844">&#8226; Who they follow</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.5454" x="856.83" y="1188.0837">&#8226; What they engaged with</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248.168" x="856.83" y="1203.883">&#8226; Engagement types (like, reply, etc.)</text></g><g class="entity" data-entity="GMN91" data-source-line="142" data-uid="ent0092" id="entity_GMN91"><path d="M1128.23,1421.6373 L1128.23,1558.0318 A0,0 0 0 0 1128.23,1558.0318 L1366.5991,1558.0318 A0,0 0 0 0 1366.5991,1558.0318 L1366.5991,1431.6373 L1356.5991,1421.6373 L1251.41,1421.6373 L1247.41,1326.7973 L1243.41,1421.6373 L1128.23,1421.6373 A0,0 0 0 0 1128.23,1421.6373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1356.5991,1421.6373 L1356.5991,1431.6373 L1366.5991,1431.6373 L1356.5991,1421.6373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178.2231" x="1134.23" y="1439.7071">Candidate Tower Output</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1134.23" y="1455.5064">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217.3691" x="1134.23" y="1471.3058">Normalized D-dimensional vector</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.478" x="1134.23" y="1487.1051">representing post content:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.9072" x="1134.23" y="1502.9044">&#8226; Text content</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.1924" x="1134.23" y="1518.7037">&#8226; Author information</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="83.0654" x="1134.23" y="1534.503">&#8226; Media type</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.1284" x="1134.23" y="1550.3023">&#8226; Metadata</text></g><g class="entity" data-entity="GMN94" data-source-line="153" data-uid="ent0095" id="entity_GMN94"><path d="M1119.14,1635.0373 L1119.14,1754.5273 L1084.18,1758.5273 L1119.14,1762.5273 L1119.14,1882.0271 A0,0 0 0 0 1119.14,1882.0271 L1413.6732,1882.0271 A0,0 0 0 0 1413.6732,1882.0271 L1413.6732,1645.0373 L1403.6732,1635.0373 L1119.14,1635.0373 A0,0 0 0 0 1119.14,1635.0373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1403.6732,1635.0373 L1403.6732,1645.0373 L1413.6732,1645.0373 L1403.6732,1635.0373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.4741" x="1125.14" y="1653.1071">ANN Search</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1125.14" y="1668.9064">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.6079" x="1125.14" y="1684.7058">Approximate Nearest Neighbor</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.2388" x="1125.14" y="1700.5051">search using:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208.749" x="1125.14" y="1716.3044">&#8226; HNSW (Hierarchical Navigable</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.9146" x="1134.2806" y="1732.1037">Small World) or</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208.5776" x="1125.14" y="1747.903">&#8226; FAISS (Facebook AI Similarity</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="50.8892" x="1134.2806" y="1763.7023">Search)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1125.14" y="1779.5017">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186.6147" x="1125.14" y="1795.301">Retrieves top-K most similar</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197.3613" x="1125.14" y="1811.1003">candidates to user embedding</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1125.14" y="1826.8996">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="273.5332" x="1125.14" y="1842.6989">Similarity = dot_product(user, candidate)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.3062" x="1175.4134" y="1858.4982">= cosine_similarity</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.6411" x="1175.4134" y="1874.2976">(both normalized)</text></g><g class="entity" data-entity="GMN97" data-source-line="171" data-uid="ent0098" id="entity_GMN97"><path d="M1613.2,681.7873 L1613.2,833.9812 L1899.6209,833.9812 L1899.6209,691.7873 L1889.6209,681.7873 L1613.2,681.7873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1889.6209,681.7873 L1889.6209,691.7873 L1899.6209,691.7873 L1889.6209,681.7873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="199.2783" x="1619.2" y="699.8571">User Embedding Aggregate</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1619.2" y="715.6564">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="243.6421" x="1619.2" y="731.4558">Multiple hash embeddings combined:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.6074" x="1619.2" y="747.2551">&#8226; User hash (2 hashes)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250.4849" x="1619.2" y="763.0544">&#8226; History post hashes (2 hashes each)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="265.4209" x="1619.2" y="778.8537">&#8226; History author hashes (2 hashes each)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1619.2" y="794.653">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="229.9438" x="1619.2" y="810.4523">Total: 1 + 2&#215;S + 2&#215;S embeddings</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="229.417" x="1619.2" y="826.2517">where S = history sequence length</text></g><g class="entity" data-entity="GMN100" data-source-line="183" data-uid="ent0101" id="entity_GMN100"><path d="M1935.09,697.5873 L1935.09,818.1825 L2199.7321,818.1825 L2199.7321,707.5873 L2189.7321,697.5873 L1935.09,697.5873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2189.7321,697.5873 L2189.7321,707.5873 L2199.7321,707.5873 L2189.7321,697.5873" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="239.1289" x="1941.09" y="715.6571">Candidate Embedding Aggregate</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1941.09" y="731.4564">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="243.6421" x="1941.09" y="747.2558">Multiple hash embeddings combined:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.6523" x="1941.09" y="763.0551">&#8226; Post hash (2 hashes)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.9277" x="1941.09" y="778.8544">&#8226; Author hash (2 hashes)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1941.09" y="794.6537">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.5854" x="1941.09" y="810.453">Total: 4 embeddings per candidate</text></g><!--link uid to uh1--><g class="link" data-entity-1="uid" data-entity-2="uh1" data-source-line="75" data-uid="lnk47" id="link_uid_uh1"><path d="M734.71,175.9873 C733.2,214.5673 729.8657,299.7319 728.3457,338.4019" fill="none" id="uid-to-uh1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="728.11,344.3973,732.4604,335.5614,728.3064,339.4012,724.4666,335.2471,728.11,344.3973" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="733.36" y="245.8171">Hash</text></g><!--link uid to uh2--><g class="link" data-entity-1="uid" data-entity-2="uh2" data-source-line="76" data-uid="lnk48" id="link_uid_uh2"><path d="M721.95,176.1573 C711.46,189.7173 696.22,208.5473 681.41,223.7473 C665.8,239.7673 658.93,240.6373 643.41,256.7473 C615.66,285.5373 590.8349,317.7838 574.9049,339.4438" fill="none" id="uid-to-uh2" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="571.35,344.2773,579.9046,339.3969,574.3124,340.2494,573.4599,334.6571,571.35,344.2773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="673.95" y="245.8171">Hash</text></g><!--link following to user_lookup--><g class="link" data-entity-1="following" data-entity-2="user_lookup" data-source-line="77" data-uid="lnk49" id="link_following_user_lookup"><path d="M866.87,176.0873 C873.4,229.5273 886.99,391.6473 830.41,506.7773 C813.96,540.2573 784.9057,563.7651 759.6057,580.1551" fill="none" id="following-to-user_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="754.57,583.4173,764.2983,581.8811,758.7664,580.6988,759.9487,575.1669,754.57,583.4173" style="stroke:#000000;stroke-width:1;"/></g><!--link engagements to hist_post_lookup--><g class="link" data-entity-1="engagements" data-entity-2="hist_post_lookup" data-source-line="78" data-uid="lnk50" id="link_engagements_hist_post_lookup"><path d="M507.32,176.1773 C390.35,209.6273 162.72,293.7473 67.41,460.7573 C57.27,478.5273 55.91,489.8673 67.41,506.7773 C99.39,553.7973 131.62,538.5773 186.41,553.7773 C216.92,562.2473 280.7195,573.0067 343.5695,582.6567" fill="none" id="engagements-to-hist_post_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="349.5,583.5673,341.2113,578.2478,344.5579,582.8085,339.9972,586.1551,349.5,583.5673" style="stroke:#000000;stroke-width:1;"/></g><!--link engagements to hist_auth_lookup--><g class="link" data-entity-1="engagements" data-entity-2="hist_auth_lookup" data-source-line="79" data-uid="lnk51" id="link_engagements_hist_auth_lookup"><path d="M494.84,164.9273 C373.01,176.2873 156.67,203.5073 101.41,256.7473 C19.8,335.3773 11,400.9073 51.41,506.7773 C65.5,543.6973 98.2934,565.899 130.1634,580.779" fill="none" id="engagements-to-hist_auth_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="135.6,583.3173,129.1373,575.8854,131.0695,581.202,125.7528,583.1342,135.6,583.3173" style="stroke:#000000;stroke-width:1;"/></g><!--link uh1 to user_emb_table--><g class="link" data-entity-1="uh1" data-entity-2="user_emb_table" data-source-line="81" data-uid="lnk52" id="link_uh1_user_emb_table"><path d="M726.8,382.2573 C726.09,403.2373 725.1214,431.9207 724.3614,454.5507" fill="none" id="uh1-to-user_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="724.16,460.5473,728.4598,451.6866,724.3278,455.5501,720.4643,451.4181,724.16,460.5473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="726.65" y="427.8271">Index</text></g><!--link uh2 to user_emb_table--><g class="link" data-entity-1="uh2" data-entity-2="user_emb_table" data-source-line="82" data-uid="lnk53" id="link_uh2_user_emb_table"><path d="M583.47,382.2573 C612.59,403.1673 655.7863,434.1978 687.3163,456.8378" fill="none" id="uh2-to-user_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="692.19,460.3373,687.2125,451.8388,688.1286,457.421,682.5464,458.3371,692.19,460.3373" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="651.79" y="427.8271">Index</text></g><!--link user_emb_table to user_lookup--><g class="link" data-entity-1="user_emb_table" data-entity-2="user_lookup" data-source-line="83" data-uid="lnk54" id="link_user_emb_table_user_lookup"><path d="M723.41,507.2373 C723.41,529.4573 723.41,557.0173 723.41,577.4573" fill="none" id="user_emb_table-to-user_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="723.41,583.4573,727.41,574.4573,723.41,578.4573,719.41,574.4573,723.41,583.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="724.41" y="550.8471">Lookup</text></g><!--link hist_post_emb_table to hist_post_lookup--><g class="link" data-entity-1="hist_post_emb_table" data-entity-2="hist_post_lookup" data-source-line="84" data-uid="lnk55" id="link_hist_post_emb_table_hist_post_lookup"><path d="M481.9,507.2373 C479.42,529.4573 476.3452,557.0543 474.0652,577.4943" fill="none" id="hist_post_emb_table-to-hist_post_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="473.4,583.4573,478.3731,574.9562,473.9543,578.4881,470.4224,574.0693,473.4,583.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="479.3" y="550.8471">Lookup</text></g><!--link hist_auth_emb_table to hist_auth_lookup--><g class="link" data-entity-1="hist_auth_emb_table" data-entity-2="hist_auth_lookup" data-source-line="85" data-uid="lnk56" id="link_hist_auth_emb_table_hist_auth_lookup"><path d="M204.59,507.2373 C199.82,529.4573 193.8799,557.1511 189.4899,577.5911" fill="none" id="hist_auth_emb_table-to-hist_auth_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="188.23,583.4573,194.0307,575.4979,189.2799,578.5688,186.2091,573.818,188.23,583.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="198.66" y="550.8471">Lookup</text></g><!--link user_lookup to agg_user--><g class="link" data-entity-1="user_lookup" data-entity-2="agg_user" data-source-line="87" data-uid="lnk57" id="link_user_lookup_agg_user"><path d="M723.41,621.2073 C723.41,650.8073 723.41,703.5573 723.41,733.0773" fill="none" id="user_lookup-to-agg_user" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="723.41,739.0773,727.41,730.0773,723.41,734.0773,719.41,730.0773,723.41,739.0773" style="stroke:#000000;stroke-width:1;"/></g><!--link hist_post_lookup to agg_user--><g class="link" data-entity-1="hist_post_lookup" data-entity-2="agg_user" data-source-line="88" data-uid="lnk58" id="link_hist_post_lookup_agg_user"><path d="M500.81,621.2073 C549.37,650.8073 640.6364,706.4349 689.0764,735.9549" fill="none" id="hist_post_lookup-to-agg_user" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="694.2,739.0773,688.5962,730.9781,689.9304,736.4753,684.4331,737.8095,694.2,739.0773" style="stroke:#000000;stroke-width:1;"/></g><!--link hist_auth_lookup to agg_user--><g class="link" data-entity-1="hist_auth_lookup" data-entity-2="agg_user" data-source-line="89" data-uid="lnk59" id="link_hist_auth_lookup_agg_user"><path d="M247.56,621.2773 C351.39,650.8673 551.1897,707.8129 654.8097,737.3429" fill="none" id="hist_auth_lookup-to-agg_user" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="660.58,738.9873,653.0209,732.6738,655.7715,737.6169,650.8283,740.3675,660.58,738.9873" style="stroke:#000000;stroke-width:1;"/></g><!--link agg_user to user_transformer--><g class="link" data-entity-1="agg_user" data-entity-2="user_transformer" data-source-line="91" data-uid="lnk60" id="link_agg_user_user_transformer"><path d="M724.69,776.8073 C726.81,806.4073 730.5922,859.1826 732.7022,888.7026" fill="none" id="agg_user-to-user_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="733.13,894.6873,736.4782,885.425,732.7735,889.7,728.4985,885.9954,733.13,894.6873" style="stroke:#000000;stroke-width:1;"/></g><!--link user_transformer to user_ln--><g class="link" data-entity-1="user_transformer" data-entity-2="user_ln" data-source-line="92" data-uid="lnk61" id="link_user_transformer_user_ln"><path d="M736.06,932.1073 C737.67,949.3173 739.5603,969.4235 741.1803,986.7135" fill="none" id="user_transformer-to-user_ln" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="741.74,992.6873,744.883,983.3534,741.2736,987.7091,736.9179,984.0997,741.74,992.6873" style="stroke:#000000;stroke-width:1;"/></g><!--link user_ln to user_norm--><g class="link" data-entity-1="user_ln" data-entity-2="user_norm" data-source-line="93" data-uid="lnk62" id="link_user_ln_user_norm"><path d="M743.8,1030.2373 C744.37,1056.6973 745.3183,1100.2287 745.8983,1126.6487" fill="none" id="user_ln-to-user_norm" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="746.03,1132.6473,749.8315,1123.5617,745.9203,1127.6485,741.8334,1123.7373,746.03,1132.6473" style="stroke:#000000;stroke-width:1;"/></g><!--link user_norm to user_embedding--><g class="link" data-entity-1="user_norm" data-entity-2="user_embedding" data-source-line="94" data-uid="lnk63" id="link_user_norm_user_embedding"><path d="M746.9,1170.2473 C747.6,1195.8173 748.7272,1236.8895 749.5272,1266.3695" fill="none" id="user_norm-to-user_embedding" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="749.69,1272.3673,753.4444,1263.2621,749.5544,1267.3691,745.4473,1263.4791,749.69,1272.3673" style="stroke:#000000;stroke-width:1;"/></g><!--link pid to ch1--><g class="link" data-entity-1="pid" data-entity-2="ch1" data-source-line="97" data-uid="lnk64" id="link_pid_ch1"><path d="M1281.32,176.0573 C1280.98,194.4073 1279.71,223.7573 1275.41,248.7473 C1269.47,283.2473 1259.1158,316.6248 1251.6158,338.7548" fill="none" id="pid-to-ch1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1249.69,344.4373,1256.3671,337.1974,1251.2949,339.7019,1248.7904,334.6296,1249.69,344.4373" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="1278.56" y="245.8171">Hash</text></g><!--link pid to ch2--><g class="link" data-entity-1="pid" data-entity-2="ch2" data-source-line="98" data-uid="lnk65" id="link_pid_ch2"><path d="M1292.81,175.9873 C1317.58,214.5673 1372.8672,300.6791 1397.7072,339.3491" fill="none" id="pid-to-ch2" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1400.95,344.3973,1399.4513,334.6631,1398.2477,340.1905,1392.7204,338.9868,1400.95,344.3973" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="1340.07" y="245.8171">Hash</text></g><!--link content to post_lookup--><g class="link" data-entity-1="content" data-entity-2="post_lookup" data-source-line="99" data-uid="lnk66" id="link_content_post_lookup"><path d="M1028.58,175.8673 C1016.46,236.6773 985.26,440.1373 1082.41,553.7773 C1099.94,574.2773 1119.9291,584.6744 1145.8891,591.5344" fill="none" id="content-to-post_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1151.69,593.0673,1144.0106,586.9007,1146.8559,591.7899,1141.9667,594.6352,1151.69,593.0673" style="stroke:#000000;stroke-width:1;"/></g><!--link aid to auth_lookup--><g class="link" data-entity-1="aid" data-entity-2="auth_lookup" data-source-line="100" data-uid="lnk67" id="link_aid_auth_lookup"><path d="M1158.67,175.9073 C1136.19,230.2173 1076.6,397.5773 1144.41,506.7773 C1169.26,546.7973 1194.81,538.6073 1239.41,553.7773 C1264.54,562.3273 1316.5676,572.8297 1369.0976,582.4197" fill="none" id="aid-to-auth_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1375,583.4973,1366.8647,577.946,1370.0813,582.5993,1365.428,585.8159,1375,583.4973" style="stroke:#000000;stroke-width:1;"/></g><!--link aid to ch1--><g class="link" data-entity-1="aid" data-entity-2="ch1" data-source-line="101" data-uid="lnk68" id="link_aid_ch1"><path d="M1162.38,176.0673 C1158.96,194.6773 1155.71,224.4673 1163.41,248.7473 C1175.58,287.1273 1201.794,319.3717 1221.424,340.1917" fill="none" id="aid-to-ch1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1225.54,344.5573,1222.2763,335.2649,1222.11,340.9193,1216.4556,340.753,1225.54,344.5573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="1164.41" y="245.8171">Hash</text></g><!--link aid to ch2--><g class="link" data-entity-1="aid" data-entity-2="ch2" data-source-line="102" data-uid="lnk69" id="link_aid_ch2"><path d="M1174.01,176.1573 C1184.13,197.5373 1204.22,232.4473 1233.41,248.7473 C1270.02,269.1873 1290.39,237.0573 1327.41,256.7473 C1364.38,276.4073 1388.257,314.4165 1401.067,338.9965" fill="none" id="aid-to-ch2" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1403.84,344.3173,1403.2278,334.4875,1401.5292,339.8833,1396.1334,338.1848,1403.84,344.3173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.5762" x="1234.41" y="245.8171">Hash</text></g><!--link ch1 to post_emb_table--><g class="link" data-entity-1="ch1" data-entity-2="post_emb_table" data-source-line="104" data-uid="lnk70" id="link_ch1_post_emb_table"><path d="M1241.62,382.1073 C1240.76,391.5173 1239.83,403.2473 1239.41,413.7573 C1239.11,421.3073 1238.69,423.2373 1239.41,430.7573 C1240.34,440.5573 1241.0176,445.3732 1242.9176,454.5032" fill="none" id="ch1-to-post_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1244.14,460.3773,1246.2224,450.7511,1243.1213,455.4822,1238.3902,452.381,1244.14,460.3773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="1240.41" y="427.8271">Index</text></g><!--link ch2 to post_emb_table--><g class="link" data-entity-1="ch2" data-entity-2="post_emb_table" data-source-line="105" data-uid="lnk71" id="link_ch2_post_emb_table"><path d="M1371.96,382.2173 C1354.75,390.6973 1334.89,401.6173 1318.41,413.7573 C1299.86,427.4273 1285.5799,441.6121 1272.4799,456.0621" fill="none" id="ch2-to-post_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1268.45,460.5073,1277.4583,456.5261,1271.8083,456.803,1271.5314,451.1529,1268.45,460.5073" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="1319.41" y="427.8271">Index</text></g><!--link post_emb_table to post_lookup--><g class="link" data-entity-1="post_emb_table" data-entity-2="post_lookup" data-source-line="106" data-uid="lnk72" id="link_post_emb_table_post_lookup"><path d="M1248.83,507.2373 C1248.26,529.4573 1247.5555,557.0193 1247.0255,577.4593" fill="none" id="post_emb_table-to-post_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1246.87,583.4573,1251.1019,574.564,1246.9996,578.459,1243.1046,574.3566,1246.87,583.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="1249" y="550.8471">Lookup</text></g><!--link ch1 to auth_emb_table--><g class="link" data-entity-1="ch1" data-entity-2="auth_emb_table" data-source-line="108" data-uid="lnk73" id="link_ch1_auth_emb_table"><path d="M1275.79,382.1173 C1291.36,390.1673 1310.49,399.2973 1328.41,405.7573 C1342.61,410.8773 1347.43,408.0873 1361.41,413.7573 C1369.85,417.1873 1405.5883,438.4983 1436.6683,457.3283" fill="none" id="ch1-to-auth_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1441.8,460.4373,1436.1752,452.3526,1437.5236,457.8464,1432.0298,459.1948,1441.8,460.4373" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="1390.88" y="427.8271">Index</text></g><!--link ch2 to auth_emb_table--><g class="link" data-entity-1="ch2" data-entity-2="auth_emb_table" data-source-line="109" data-uid="lnk74" id="link_ch2_auth_emb_table"><path d="M1422.57,382.0973 C1427.9,391.5073 1434.54,403.2373 1440.41,413.7573 C1449.07,429.2873 1455.8563,441.5757 1463.2663,455.0957" fill="none" id="ch2-to-auth_emb_table" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1466.15,460.3573,1465.3321,450.5425,1463.7469,455.9727,1458.3167,454.3875,1466.15,460.3573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.2354" x="1449.8" y="427.8271">Index</text></g><!--link auth_emb_table to auth_lookup--><g class="link" data-entity-1="auth_emb_table" data-entity-2="auth_lookup" data-source-line="110" data-uid="lnk75" id="link_auth_emb_table_auth_lookup"><path d="M1478.41,507.2373 C1478.41,529.4573 1478.41,557.0173 1478.41,577.4573" fill="none" id="auth_emb_table-to-auth_lookup" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1478.41,583.4573,1482.41,574.4573,1478.41,578.4573,1474.41,574.4573,1478.41,583.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.0361" x="1479.41" y="550.8471">Lookup</text></g><!--link post_lookup to agg_cand--><g class="link" data-entity-1="post_lookup" data-entity-2="agg_cand" data-source-line="112" data-uid="lnk76" id="link_post_lookup_agg_cand"><path d="M1265.08,621.2073 C1295.91,650.8073 1352.7817,705.4021 1383.5317,734.9221" fill="none" id="post_lookup-to-agg_cand" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1387.86,739.0773,1384.1376,729.959,1384.2531,735.6146,1378.5974,735.7301,1387.86,739.0773" style="stroke:#000000;stroke-width:1;"/></g><!--link auth_lookup to agg_cand--><g class="link" data-entity-1="auth_lookup" data-entity-2="agg_cand" data-source-line="113" data-uid="lnk77" id="link_auth_lookup_agg_cand"><path d="M1470.01,621.2073 C1456.14,650.8073 1431.147,704.1247 1417.307,733.6447" fill="none" id="auth_lookup-to-agg_cand" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1414.76,739.0773,1422.2022,732.6264,1416.8825,734.5502,1414.9588,729.2305,1414.76,739.0773" style="stroke:#000000;stroke-width:1;"/></g><!--link agg_cand to cand_transformer--><g class="link" data-entity-1="agg_cand" data-entity-2="cand_transformer" data-source-line="115" data-uid="lnk78" id="link_agg_cand_cand_transformer"><path d="M1394.51,776.8073 C1374.86,806.4073 1339.16,860.1695 1319.55,889.6895" fill="none" id="agg_cand-to-cand_transformer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1316.23,894.6873,1324.5418,889.404,1318.9967,890.5225,1317.8781,884.9773,1316.23,894.6873" style="stroke:#000000;stroke-width:1;"/></g><!--link cand_transformer to cand_ln--><g class="link" data-entity-1="cand_transformer" data-entity-2="cand_ln" data-source-line="116" data-uid="lnk79" id="link_cand_transformer_cand_ln"><path d="M1303.86,932.1073 C1303.32,949.3173 1302.6973,969.4002 1302.1573,986.6902" fill="none" id="cand_transformer-to-cand_ln" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1301.97,992.6873,1306.249,983.8166,1302.1261,987.6897,1298.2529,983.5668,1301.97,992.6873" style="stroke:#000000;stroke-width:1;"/></g><!--link cand_ln to cand_norm--><g class="link" data-entity-1="cand_ln" data-entity-2="cand_norm" data-source-line="117" data-uid="lnk80" id="link_cand_ln_cand_norm"><path d="M1297.03,1030.2373 C1290.51,1056.6973 1279.7276,1100.4021 1273.2076,1126.8221" fill="none" id="cand_ln-to-cand_norm" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1271.77,1132.6473,1277.8098,1124.8678,1272.968,1127.7929,1270.0429,1122.9511,1271.77,1132.6473" style="stroke:#000000;stroke-width:1;"/></g><!--link cand_norm to cand_embedding--><g class="link" data-entity-1="cand_norm" data-entity-2="cand_embedding" data-source-line="118" data-uid="lnk81" id="link_cand_norm_cand_embedding"><path d="M1264.96,1170.2473 C1261.46,1195.8173 1255.8427,1236.9426 1251.8127,1266.4226" fill="none" id="cand_norm-to-cand_embedding" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1251,1272.3673,1256.1821,1263.992,1251.6772,1267.4134,1248.2558,1262.9085,1251,1272.3673" style="stroke:#000000;stroke-width:1;"/></g><!--link cand_embedding to ann_index--><g class="link" data-entity-1="cand_embedding" data-entity-2="ann_index" data-source-line="121" data-uid="lnk82" id="link_cand_embedding_ann_index"><path d="M1197.25,1327.0773 C1180.67,1336.4373 1162.39,1347.4373 1146.41,1358.6373 C1099.83,1391.3073 1054.7467,1430.8961 1024.8067,1458.4261" fill="none" id="cand_embedding-to-ann_index" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1020.39,1462.4873,1029.7224,1459.34,1024.0706,1459.103,1024.3076,1453.4511,1020.39,1462.4873" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="54.7041" x="1165.6151" y="1372.7071">Store all</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.1143" x="1147.41" y="1388.5064">[N = millions]</text></g><!--link user_embedding to ann_search--><g class="link" data-entity-1="user_embedding" data-entity-2="ann_search" data-source-line="124" data-uid="lnk83" id="link_user_embedding_ann_search"><path d="M751.21,1327.0673 C753.54,1375.1273 762.66,1479.1573 798.41,1558.0373 C828.8,1625.0673 882.1301,1685.2721 918.4701,1722.0021" fill="none" id="user_embedding-to-ann_search" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="922.69,1726.2673,919.2036,1717.0562,919.1734,1722.713,913.5166,1722.6828,922.69,1726.2673" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.7856" x="799.41" y="1495.4071">Query vector</text></g><!--link ann_index to ann_search--><g class="link" data-entity-1="ann_index" data-entity-2="ann_search" data-source-line="125" data-uid="lnk84" id="link_ann_index_ann_search"><path d="M988.79,1516.8973 C981.96,1566.1773 967.9844,1666.9042 960.6044,1720.1042" fill="none" id="ann_index-to-ann_search" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="959.78,1726.0473,964.9787,1717.6823,960.467,1721.0947,957.0546,1716.583,959.78,1726.0473" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.7534" x="979.31" y="1602.1071">Search space</text></g><!--link ann_search to topk--><g class="link" data-entity-1="ann_search" data-entity-2="topk" data-source-line="126" data-uid="lnk85" id="link_ann_search_topk"><path d="M934.93,1790.7973 C899.57,1844.7873 831.4475,1948.8181 803.3875,1991.6581" fill="none" id="ann_search-to-topk" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="800.1,1996.6773,808.3774,1991.3402,802.8396,1992.4947,801.6852,1986.9569,800.1,1996.6773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="87.2358" x="853.04" y="1934.0971">Top-K results</text></g><!--link ann_search to cand_ids--><g class="link" data-entity-1="ann_search" data-entity-2="cand_ids" data-source-line="127" data-uid="lnk86" id="link_ann_search_cand_ids"><path d="M955.41,1790.7973 C955.41,1844.7873 955.41,1947.8373 955.41,1990.6773" fill="none" id="ann_search-to-cand_ids" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="955.41,1996.6773,959.41,1987.6773,955.41,1991.6773,951.41,1987.6773,955.41,1996.6773" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.1338" x="956.41" y="1934.0971">Retrieved IDs</text></g><!--link ann_search to sim_scores--><g class="link" data-entity-1="ann_search" data-entity-2="sim_scores" data-source-line="128" data-uid="lnk87" id="link_ann_search_sim_scores"><path d="M975.99,1791.0073 C996.08,1821.7973 1027.48,1870.0473 1054.41,1912.0273 C1073.41,1941.6373 1092.0804,1971.1616 1104.9904,1991.6416" fill="none" id="ann_search-to-sim_scores" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="1108.19,1996.7173,1106.7744,1986.9707,1105.5237,1992.4876,1100.0068,1991.2368,1108.19,1996.7173" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77.3589" x="1075.16" y="1926.0971">Dot product</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.2495" x="1078.7147" y="1941.8964">similarities</text></g><!--link GMN97 to agg_user--><g class="link" data-entity-1="GMN97" data-entity-2="agg_user" data-source-line="171" data-uid="lnk99" id="link_GMN97_agg_user"><path d="M1650.51,681.4873 C1628.18,669.0273 1604.05,658.0173 1579.91,651.2873 C1280.02,567.7573 902.8,690.0073 771.26,739.0573" fill="none" id="GMN97-agg_user" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><!--link GMN100 to agg_cand--><g class="link" data-entity-1="GMN100" data-entity-2="agg_cand" data-source-line="183" data-uid="lnk102" id="link_GMN100_agg_cand"><path d="M1992.24,697.2673 C1964.82,678.7573 1932.51,660.7873 1899.91,651.2873 C1777.44,615.6273 1736.86,621.1873 1612.91,651.2873 C1543.12,668.2373 1470.55,713.1573 1432.8,738.9473" fill="none" id="GMN100-agg_cand" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/></g><g class="legend" data-source-line="192"><rect fill="none" height="469.3955" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="244.9785" x="1942.7536" y="2061.0373"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="215.9336" x="1947.7536" y="2080.1125">Two-Tower Retrieval Model</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="1947.7536" y="2097.1271">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="64.1963" x="1947.7536" y="2114.1418">Purpose</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="199.5068" x="1947.7536" y="2131.1564">Efficiently narrow millions of</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="207.3955" x="1947.7536" y="2148.1711">candidates to hundreds using</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="208.8105" x="1947.7536" y="2165.1857">approximate similarity search</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="1947.7536" y="2182.2004">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115.6299" x="1947.7536" y="2199.215">Key Properties</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="200.3613" x="1947.7536" y="2216.2297">&#8226; User and candidate towers</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.7686" x="1957.5973" y="2233.2443">are independent</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="224.7246" x="1947.7536" y="2250.259">&#8226; Candidate embeddings can be</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="189.9092" x="1957.5973" y="2267.2736">pre-computed and indexed</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="201.7148" x="1947.7536" y="2284.2883">&#8226; User embedding computed</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="166.3115" x="1957.5973" y="2301.3029">on-demand per request</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="188.4189" x="1947.7536" y="2318.3176">&#8226; L2 normalization enables</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="225.1348" x="1957.5973" y="2335.3322">cosine similarity via dot product</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="1947.7536" y="2352.3469">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194.1611" x="1947.7536" y="2369.3615">Hash-Based Embeddings</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="161.3965" x="1947.7536" y="2386.3762">&#8226; num_user_hashes: 2</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162.2441" x="1947.7536" y="2403.3908">&#8226; num_item_hashes: 2</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="177.0439" x="1947.7536" y="2420.4055">&#8226; num_author_hashes: 2</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="234.4795" x="1947.7536" y="2437.4201">&#8226; Multiple hashes reduce collision</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="195.5967" x="1957.5973" y="2454.4348">and improve representation</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="4.9219" x="1947.7536" y="2471.4494">&#160;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93.126" x="1947.7536" y="2488.4641">ANN Search</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="179.5254" x="1947.7536" y="2505.4787">&#8226; Sub-millisecond latency</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="233.9463" x="1947.7536" y="2522.4934">&#8226; Millions of candidates &#8594; ~1000</text></g><!--SRC=[hLZDRjj64BxpAQREeH8QDR7HlmH90DcMO2E9waOgScW2OKMknON9NPPSsbQB53tr0Nh9lQ-IDycJT6QNv2ufIav_PC0YTsPdv-URdzLdEkOfXonXGWR5bP0PoraAAnPUhNDLokX49Ig7UzC9_GM15ZhXS14hBiKjlE8w5_oQ9J22nOqQBTGDp-6bYdW2upoCXUQXBdCU11aAP6iE1-SoApLCEQFruW3k7H-VJgR7y6i0-CcHdyar7d7mOu6Y71yheCILvIMkLCnz6yvFBQk8-bYcAadKZP1hU24ARJWlwwK-_bSyv5B3HAvHznGVhIBSlPjTxuAkyYTCHY9YchSj275vZmKNgj2r1Lc_1ORbH4cDXrkHzhcFTrpgM3KkOVq2N_98C5XiCcwuKdgjZ7hdXSquruGNGtRotUIRaqSxGdR6YXYcfGorKD8BN4phlMQtTi2XtH8VtirwLB4U-L50hxCLAsfr9kcAHn65VC5M2NVwy7IrrBJKsNM6o53v1eod-tR7oB3Ca7gdY2e0EuKmf7j2UjtfDhzGwghCd069UUzksg6-jzdflr_2blPT6KRzIaPNo7YzplcQ4g3PRx70rkibgTzhx29dihXKUKemg-tKRh6xwGNRuAuPqZoto2sk8yF24l6B5t-9ItUu_8tywNGK2Kpq0k76ahSjz5YULfQujAzJPJezEJa-sKuLnzcJBwPC_BDy2JyzNy9T-R8JyNl1lWVaT-1xDqJte7CVAlyr8CdXkoFKHQK9pwUZqh1_0YeDNoygdIftGDE8w8VcU3Q3SndnMnXSv7mKgXJxC8-61gFJhn-TLbYZtEzWsJaCJvt1X_TmQezZKYu5oJGxIQIIr2yFnbcMgrkHqkuPPzZ-D7wBTRnI-HivE9lDNp-OZi_dys4Zfq2sC6wfxAQBxqkDsgAgayFZoUJRxNHQg6pq71gLRMIrogvsk_Byr4is4HLTphb8HS9oeJSm3rNTmGkHBWlpIgf-3gulmXJdY0073nYDdb7_WiScjxsbetgf6JeimQlctcXXQ5l5kfUX1NmwkX7RP1yURS8Va1hxoEtbZdx8PlCjwEc2lGftThHBGgy5RaVWdqoiJVFOEcMRwajiKOFwoHdd9tDtmNE1h1IIRitaQ_FKScoLX0YIJbimI841YWUJFSWr3B8A9Q43ZbjgW5DDUsRPHmMhM7qWi6s9R5jY45PmwSIonaDOmMK7kGS1lS5lZka0e7lC3d8FRFeHquS9Kztxu608GVraFTEjxTq5nuLmgBxTce53y-JMMt1mfTYKZ3Q3LQukh6ZP70io1vOaflW-1QnA2KqARqcKNwHi0MsZhv5cookA-w7aEDjTOvrJUU3EsUApug30Qim3ZqACL5YHnHPTB8LbWXUX3azTLf6lgkCyefhRvNC55JbFbGRi754PwZVOs2hR11PRj7MciB074l-J0g0kkva6y6Jrp2l8jciyUR1wHXsrQROHj3fdxGig_XcgWUb5ZZC5Gc2sKVCgW6QT29HyZ7mVV_yBNiSAyEgygUwFpIfUxSooBTCHt0WTLqHtYmIDrwq21ecuulVfs6Hp7xWElnnYUO-0J0oieIkbjKh9rWwCZAtTklAV3ARCgM-JjPKBVgkz6oOjLVENa9GEZCRAYc0lacHPiw0PZObTctAS0pIPvBLzOmxbXOLTRSA-EGB95OpA0lMlLQRP0WPdWkT44o7QEsFNOjrChdDqIWAlLPv4Gp1YQ9kPHc0mHRIli4Z0-DpBBRlF73OajMf0cn43Ko0brrLmHNBOZ258jq3oyX_yf7qAaS96PY4_8DRxRlkmcUZDvob60YtbowAjMFCP85fYa4tOjz2Ky4lhU7S7gpF6pTFDe5m7uIMcjyYmwfeRIMC9_VIGhb2Vg7Qz4MIO1aVccnV3EYhLdTA0p98S4t16ZcrpCekp7Rp8l52Q9O_X4Bw0em_lv_MNqmzvRc9CNvYZw-9ARC5_BhaCoHToZQcvnqFLfQ2LP_-7covg7soxQUoCzedEsgzymHcwkm6BPqd2r_HYyimQu7wRSpEr-PMkLXvvBieSesFD0PXSNefGODed6v0ipt5WgHiF-cSBv74fevn7XSr593ClSnrUguojJdoETV8YLsW6bVZgu0P8r96RG_0CrDxEw5W6pDoKeP6kBhaO-Qvd4bOsxJFlqcDacxx78_z8rpPhJhDLoL74Kzf37iy9GKLzBDxYweGpnH0BFrMQeheHKRxwzbzZYOnSawiSGOFOwDXq67VNylmXotJP_8R6YyTmv164vcalmMRG5gc5KumUXgt4V0YnZud2bdEm3afHoslkkeIjzhsrsegUbwkHGKd1iMb4a60uPBYf3tRuyT7pyOy_uRV3XmyV4e8jT8E_0G00]--></g></svg>